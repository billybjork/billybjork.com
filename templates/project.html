{% import "macros/_thumbnail_macros.html" as thumbnail_macros %}

<article 
    id="project-{{ project.slug }}" 
    class="project-item {% if is_open %}active{% endif %}" 
    data-slug="{{ project.slug }}">
    
    <header class="project-header" 
             hx-get="/{{ project.slug }}" 
             hx-target="#details-{{ project.slug }}" 
             hx-trigger="click" 
             hx-swap="innerHTML"
             hx-push-url="true">
            <time class="project-date">{{ project.formatted_date }}</time>
            <h2 class="project-name">{{ project.name }}</h2>
            {% if project.pinned and not is_open %}
                <i class="fas fa-thumbtack pinned-icon"></i>
            {% endif %}
    </header>
        
    <button class="close-project" 
            hx-get="/{{ project.slug }}?close=true" 
            hx-target="#details-{{ project.slug }}" 
            hx-swap="innerHTML" 
            hx-push-url="/" 
            aria-label="Close project">
        &times;
    </button>

    {{ thumbnail_macros.render_thumbnail(project, data_animate=True) }}
    
    <section id="details-{{ project.slug }}" class="project-details">
        {% if is_open %}
            {% include "project_details.html" %}
        {% endif %}
    </section>
</article>