{% import "thumbnail.html" as thumbnail_macro %}

<article 
    id="project-{{ project.slug }}" 
    class="project-item {% if is_open %}active{% endif %}" 
    data-slug="{{ project.slug }}">
    
    <header class="project-header">
        <div class="project-header-content">
            <time class="project-date">{{ project.formatted_date }}</time>
            <h2 class="project-name">{{ project.name }}</h2>
            {% if not is_open %}
                {% if project.is_draft %}
                    <svg class="icon draft-icon" viewBox="0 0 512 512" fill="currentColor" aria-hidden="true"><path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"/></svg>
                {% elif project.pinned %}
                    <svg class="icon pinned-icon" viewBox="0 0 384 512" fill="currentColor" aria-hidden="true"><path d="M32 32C32 14.3 46.3 0 64 0L320 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-29.5 0 11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8s-15.7 13.3-26 13.3L32 352c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64 64 64C46.3 64 32 49.7 32 32zM160 384l64 0 0 96c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-96z"/></svg>
                {% endif %}
            {% endif %}
        </div>
    </header>
        
    <div class="project-top-actions">
        {% if is_dev_mode %}
        <button class="edit-project-btn edit-project-btn-top" data-action="edit" aria-label="Edit" title="Edit">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"/></svg>
        </button>
        {% endif %}
        <button class="close-project" aria-label="Close project">&times;</button>
    </div>

    {{ thumbnail_macro.render_thumbnail(project, data_animate=True) }}
    
    <section id="details-{{ project.slug }}" class="project-details">
        {% if is_open %}
            {% include "project_details.html" %}
        {% endif %}
    </section>

</article>
