{% extends "base.html" %}

{% block main_class %}home-page{% endblock %}

{% block content %}

<section id="project-list">
    {% set open_project = open_project if open_project is defined else None %}
    {% for project in projects %}
        {% set is_open = (open_project and open_project.slug == project.slug) %}
        {% include "project.html" with context %}
    {% endfor %}
    
    {% if not isolation_mode and has_more %}
        <div 
            id="infinite-scroll-sentinel-1"
            data-page="{{ page + 1 }}"
            hx-get="/?page={{ page + 1 }}" 
            hx-trigger="revealed" 
            hx-target="#infinite-scroll-sentinel-1" 
            hx-swap="outerHTML"
            style="height: 100px; text-align: center; padding: 20px;">
            <div class="spinner"></div>
            <p>Loading more projects...</p>
        </div>
    {% endif %}
</section>
<br><br>
{% endblock %}