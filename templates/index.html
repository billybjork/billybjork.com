{% extends "base.html" %}

{% block content %}
<section class="video-reel">
    {% if reel_video_link %}
    <video 
        id="reel-video-player"
        class="hls-video"
        controls 
        loop
        playsinline 
        preload="metadata" 
        fetchpriority="high"
        data-hls-url="{{ reel_video_link }}">
    </video>
    {% endif %}
</section>
<section id="project-list">
    {% for project in projects %}
    <article class="project-item {% if project.highlight_project %}highlight-project{% endif %}" data-slug="{{ project.slug }}">
        <figure class="thumbnail"
             style="background-image: url('{{ project.thumbnail_link }}');"
             data-frames="60"
             data-frame-width="320"
             data-frame-height="180"
             data-columns="5">
        </figure>
        <header class="project-header" hx-get="/{{ project.slug }}" hx-target="next .project-detail" hx-trigger="click" hx-swap="innerHTML">
            <time class="project-date">{{ project.formatted_date }}</time>
            <h2 class="project-name">{{ project.name }}</h2>
            <button class="close-project" aria-label="Close project">Ã—</button>
        </header>
        <section class="project-detail" {% if open_project and open_project.slug == project.slug %}data-initial-open="true"{% endif %}>
            {% if open_project and open_project.slug == project.slug %}
                {% include "project.html" %}
            {% endif %}
        </section>
    </article>
    {% endfor %}
</section>
{% endblock %}
