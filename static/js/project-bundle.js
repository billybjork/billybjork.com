// Auto-generated by esbuild - do not edit directly

"use strict";(()=>{var Ae="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",Ie="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js",Pe="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js";function B(e,t){let n=document.createElement("script");n.type="text/javascript",n.onload=function(){t&&t()},n.src=e,document.head.appendChild(n)}function je(e,t){let n=document.createElement("link");n.rel="stylesheet",n.href=e,n.onload=function(){t&&t()},document.head.appendChild(n)}function xe(e){je(Ae,function(){B(Ie,function(){B(Pe,function(){e&&e()})})})}function R(e){e.querySelector("pre code")&&(typeof window.Prism>"u"?xe(function(){window.Prism?.highlightAllUnder(e)}):window.Prism.highlightAllUnder(e))}typeof window<"u"&&(window.checkAndHighlightCode=R);var L=null;function U(e){e.querySelector("pre code")&&R(e)}function Oe(){let e=new URLSearchParams(window.location.search);return e.has("show_drafts")?e.get("show_drafts")==="true":sessionStorage.getItem("bb_show_drafts")==="true"}function M(e,t={}){let n=new URL(e,window.location.origin);return Object.entries(t).forEach(([o,r])=>{r!=null&&n.searchParams.set(o,String(r))}),Oe()&&n.searchParams.set("show_drafts","true"),n.toString()}function E(){return document.body.dataset.projectUrlSync!=="false"}function f(e,t={}){document.body.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))}function K(e,t=!1){let n=document.createElement("div");n.className=`copy-notification${t?" error":""}`,n.textContent=e,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&document.body.removeChild(n)},4e3)}async function Y(e,t){let n=new URL(e,window.location.origin);n.searchParams.set("_partial","1");let o=await fetch(n.toString(),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html"},signal:t});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);return await o.text()}async function A(e,t={}){let n=E(),{pushUrl:o=n,smoothScroll:r=!0}=t,i=document.querySelector(`.project-item[data-slug="${e}"]`);if(!i){console.error(`Project item not found for slug: ${e}`);return}if(i.classList.contains("active"))return;let s=document.getElementById(`details-${e}`);if(!s){console.error(`Details container not found for slug: ${e}`);return}L&&L.abort(),L=new AbortController,D(),f("project:beforeLoad",{element:s,slug:e,isOpen:!0});try{let a=M(`/${e}`),l=await Y(a,L.signal);if(f("project:beforeSwap",{element:s,slug:e,isOpen:!0}),s.innerHTML=l,i.classList.add("active"),o){let d=M(`/${e}`);history.pushState({slug:e,isOpen:!0},"",d)}f("project:afterSwap",{element:s,slug:e,isOpen:!0,smoothScroll:r}),U(s),f("project:loaded",{element:s,slug:e,isOpen:!0})}catch(a){if(a instanceof Error&&a.name==="AbortError")return;console.error("Failed to load project:",a),f("project:error",{element:s,slug:e,isOpen:!1,error:a instanceof Error?a:new Error(String(a))}),K("Failed to load content. Please try again.",!0)}finally{L=null}}async function G(e,t={}){let n=E(),{pushUrl:o=n}=t,r=document.querySelector(`.project-item[data-slug="${e}"]`);if(!r)return;let i=document.getElementById(`details-${e}`);if(i){if(f("project:beforeSwap",{element:i,slug:e,isOpen:!1}),i.innerHTML="",r.classList.remove("active"),o){let s=M("/");history.pushState({slug:null,isOpen:!1},"",s)}f("project:afterSwap",{element:i,slug:e,isOpen:!1})}}function D(){document.querySelectorAll(".project-item.active").forEach(t=>{let n=t.dataset.slug;if(!n)return;let o=document.getElementById(`details-${n}`);f("project:beforeSwap",{element:o,slug:n,isOpen:!1}),o&&(o.innerHTML=""),t.classList.remove("active"),f("project:afterSwap",{element:o,slug:n,isOpen:!1})})}async function J(e){let t=parseInt(e.dataset.page??"",10);if(!(!t||e.dataset.loading==="true")){e.dataset.loading="true";try{let n=M("/",{page:t}),o=await Y(n);e.insertAdjacentHTML("beforebegin",o),e.remove(),f("projects:loaded",{page:t})}catch(n){console.error("Failed to load more projects:",n),e.dataset.loading="false",K("Failed to load more projects.",!0)}}}var y=null;function Ce(){y&&y.disconnect(),y=new IntersectionObserver(e=>{e.forEach(t=>{if(t.isIntersecting){let n=t.target;n.dataset.page&&J(n)}})},{rootMargin:"100px",threshold:0}),X()}function X(){document.querySelectorAll('[id^="infinite-scroll-sentinel-"]').forEach(t=>{t.dataset.page&&y&&y.observe(t)})}function Re(e){if(!E())return;let t=e.state;if(t&&t.slug&&t.isOpen)A(t.slug,{pushUrl:!1});else{let n=window.location.pathname;n==="/"?D():n!=="/me"&&window.location.reload()}}function De(e){let t=e.target,n=t.closest(".project-header");if(n){let i=n.closest(".project-item");if(i){let s=i.dataset.slug;if(s){e.preventDefault(),A(s);return}}}let o=t.closest(".thumbnail");if(o){let i=o.closest(".project-item");if(i){let s=i.dataset.slug;if(s){e.preventDefault(),A(s);return}}}let r=t.closest(".close-project");if(r&&!(document.body.dataset.isolationMode==="true")){let s=r.closest(".project-item");if(s){let a=s.dataset.slug;if(a){e.preventDefault(),G(a);return}}}}function W(){if(document.body.addEventListener("click",De),E()&&window.addEventListener("popstate",Re),Ce(),document.body.addEventListener("projects:loaded",()=>{X()}),E()&&!history.state){let e=window.location.pathname;if(e!=="/"&&e!=="/me"){let t=e.slice(1);!!document.querySelector(`.project-item[data-slug="${t}"]`)?history.replaceState({slug:t,isOpen:!0},""):history.replaceState({slug:null,isOpen:!1},"")}else history.replaceState({slug:null,isOpen:!1},"")}U(document.body)}function ke(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",W):W()}var Q={openProject:A,closeProject:G,closeAllProjects:D,loadMoreProjects:J,dispatchEvent:f,init:ke};typeof window<"u"&&(window.ProjectLoader=Q);var Z=Q;var S="data-scroll-lock-count",k="data-scroll-lock-y";function V(){let e=document.body,t=Number(e.getAttribute(S)||"0");if(t===0){let n=window.scrollY||window.pageYOffset||0;e.setAttribute(k,String(n)),e.classList.add("modal-open"),e.style.position="fixed",e.style.top=`-${n}px`,e.style.left="0",e.style.right="0",e.style.width="100%",e.style.overflow="hidden"}e.setAttribute(S,String(t+1))}function ee(){let e=document.body,t=Number(e.getAttribute(S)||"0");if(t<=0){e.classList.remove("modal-open");return}if(t>1){e.setAttribute(S,String(t-1));return}let n=Number(e.getAttribute(k)||"0");e.removeAttribute(S),e.removeAttribute(k),e.classList.remove("modal-open"),e.style.position="",e.style.top="",e.style.left="",e.style.right="",e.style.width="",e.style.overflow="";let o=document.documentElement,r=o.style.scrollBehavior;o.style.scrollBehavior="auto",window.scrollTo({top:n,left:0,behavior:"auto"}),requestAnimationFrame(()=>{r?o.style.scrollBehavior=r:o.style.removeProperty("scroll-behavior")})}function j(e){e&&(e.style.backgroundPosition="0 0")}function ie(e){let r=e.getBoundingClientRect().top+window.pageYOffset-40;window.scrollTo({top:r,behavior:"smooth"})}function w(e,t=!1){let n=document.createElement("div");n.className=`copy-notification${t?" error":""}`,n.textContent=e,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&document.body.removeChild(n)},4e3)}function se(e){if(e.dataset.closing==="true")return;e.dataset.closing="true";let t=e.querySelector("video");t&&t.pause(),ee(),e.classList.remove("visible"),e.addEventListener("transitionend",()=>e.remove(),{once:!0})}function q(){let e=document.querySelector(".image-lightbox");return e?(se(e),!0):!1}var le="lightbox-trigger-video";function Ve(e){return e.controls||e.hasAttribute("controls")}function ae(e){return!e.closest(".project-content")||e.closest(".video-container")||e.dataset.lightbox==="off"||Ve(e)?!1:e.loop||e.autoplay||e.hasAttribute("loop")||e.hasAttribute("autoplay")}function ce(e=document){e.querySelectorAll(".project-content video").forEach(n=>{n.classList.toggle(le,ae(n))})}function de(){let e=document.createElement("div");e.className="image-lightbox";let t=document.createElement("button");return t.className="image-lightbox-close",t.setAttribute("type","button"),t.setAttribute("aria-label","Close media"),t.innerHTML="&times;",e.appendChild(t),{overlay:e,closeButton:t}}function ue(e,t){let n=()=>se(e);t.addEventListener("click",n),e.addEventListener("click",o=>{o.target===e&&n()})}function Fe(e){q();let{overlay:t,closeButton:n}=de(),o=document.createElement("img");o.src=e.currentSrc||e.src,o.alt=e.alt||"",t.appendChild(o),document.body.appendChild(t),V(),requestAnimationFrame(()=>t.classList.add("visible")),ue(t,n)}function Ne(e){q();let{overlay:t,closeButton:n}=de(),o=e.cloneNode(!0);o.removeAttribute("id"),o.classList.remove("lazy-video","lazy-inline-video","hls-video",le);let r=e.autoplay||e.hasAttribute("autoplay")||e.loop||e.hasAttribute("loop"),i=e.loop||e.hasAttribute("loop");o.controls=!1,o.removeAttribute("controls"),o.autoplay=r,o.loop=i,o.muted=!0,o.defaultMuted=!0,o.playsInline=!0,o.preload="auto",r?o.setAttribute("autoplay",""):o.removeAttribute("autoplay"),i?o.setAttribute("loop",""):o.removeAttribute("loop"),o.setAttribute("muted",""),o.setAttribute("playsinline",""),e.currentSrc&&(o.src=e.currentSrc),t.appendChild(o),document.body.appendChild(t),V(),requestAnimationFrame(()=>{t.classList.add("visible"),r&&o.play().catch(()=>{})}),ue(t,n)}function _(e,t="URL copied to clipboard!"){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(()=>{w(t)}).catch(n=>{console.error("Failed to copy using Clipboard API: ",n),w("Failed to copy the URL.",!0)}):(console.warn("Clipboard API not supported in this browser."),w("Copy to clipboard not supported in this browser.",!0))}function fe(e=document){let t=e.querySelectorAll("a[href]"),n=window.location.host;t.forEach(o=>{let r=o.getAttribute("href");if(r&&!(r.startsWith("#")||r.startsWith("/")||r.startsWith("../")||r.startsWith("mailto:")||r.startsWith("tel:")))try{new URL(r,window.location.origin).host!==n&&(o.setAttribute("target","_blank"),o.setAttribute("rel","noopener noreferrer"))}catch{}})}function qe(e,t){e.forEach(n=>{if(n.isIntersecting){let o=n.target;o.classList.add("fade-in"),t.unobserve(o)}})}var _e=new IntersectionObserver(qe,{root:null,rootMargin:"0px",threshold:.1});function me(e){e.forEach(t=>{!t.classList.contains("fade-in")&&!t.classList.contains("no-fade")&&_e.observe(t)})}function $e(){let e=document.querySelectorAll(".project-item");me(e)}function ze(e,t){e.forEach(n=>{if(n.isIntersecting){let o=n.target,r=o.getAttribute("data-bg");if(r){let i=new Image;i.onload=()=>{o.style.backgroundImage=`url('${r}')`,o.removeAttribute("data-bg"),requestAnimationFrame(()=>{o.classList.remove("lazy-thumbnail")})},i.src=r}t.unobserve(o)}})}var Be=new IntersectionObserver(ze,{rootMargin:"0px 0px 50px 0px",threshold:.1});function x(e=document){e.querySelectorAll(".lazy-thumbnail").forEach(n=>{n.getAttribute("data-bg")&&Be.observe(n)})}var We=document.body.dataset.hlsJsSrc||"https://cdn.jsdelivr.net/npm/hls.js@1.5.12",I=null,Ue=768,Ke=12,Ye=24,Ge=180;function pe(e){return e.closest(".video-container")}function he(e){let t=pe(e);if(!t)return;let n=e.videoWidth,o=e.videoHeight;if(!n||!o)return;let r=n/o,i=window.innerWidth<=Ue?Ke:Ye,s=t.getBoundingClientRect(),a=Math.max(s.top,i),l=window.innerHeight-a-i,d=Math.max(Ge,Math.floor(l));t.style.setProperty("--video-aspect-ratio",r.toString()),t.style.setProperty("--video-max-height",`${d}px`),t.classList.add("video-dimensions-ready")}function Je(e){e.videoLayoutCleanup&&e.videoLayoutCleanup();let t=()=>he(e),n=null,o=()=>{n===null&&(n=window.requestAnimationFrame(()=>{n=null,t()}))};e.addEventListener("loadedmetadata",t),e.addEventListener("resize",t),window.addEventListener("resize",t),window.addEventListener("scroll",o,{passive:!0}),t(),e.videoLayoutCleanup=()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("resize",t),window.removeEventListener("resize",t),window.removeEventListener("scroll",o),n!==null&&(window.cancelAnimationFrame(n),n=null);let r=pe(e);r&&(r.classList.remove("video-dimensions-ready"),r.style.removeProperty("--video-aspect-ratio"),r.style.removeProperty("--video-max-height"))}}function Xe(){return window.Hls?Promise.resolve():I||(I=new Promise((e,t)=>{let n=document.createElement("script");n.src=We,n.async=!0,n.onload=()=>e(),n.onerror=()=>t(new Error("Failed to load HLS.js")),document.head.appendChild(n)}),I)}function T(e,t=!1){return console.log("[HLS] setupHLSPlayer called",{autoplay:t}),new Promise((n,o)=>{let r=e.dataset.hlsUrl;if(console.log("[HLS] Stream URL:",r),!r){console.error("No HLS URL provided for video element"),o("No HLS URL provided");return}e.classList.add("hls-video"),Je(e);let i=()=>{if(he(e),document.body.classList.contains("editing")){e.pause(),n();return}t&&e.play().catch(l=>{l.name!=="AbortError"&&console.error("Autoplay failed:",l)}),n()},s=e.canPlayType("application/vnd.apple.mpegurl");console.log("[HLS] Native HLS support:",s?"yes":"no"),console.log("[HLS] HLS.js loaded:",!!window.Hls),console.log("[HLS] HLS.js supported:",window.Hls?Hls.isSupported():"n/a");let a=()=>{if(!window.Hls||!Hls.isSupported()){if(s){e.src=r,e.addEventListener("loadedmetadata",i,{once:!0});return}console.error("HLS is not supported in this browser"),o("HLS is not supported");return}e.hlsInstance&&(console.warn("HLS instance already exists for this video element. Destroying existing instance."),e.hlsInstance.destroy());let l=new Hls({abrEwmaDefaultEstimate:5e6,capLevelToPlayerSize:!0});e.hlsInstance=l,l.loadSource(r),l.attachMedia(e),l.on(Hls.Events.MEDIA_ATTACHED,()=>{l.on(Hls.Events.MANIFEST_PARSED,()=>{console.log("[HLS] Available quality levels:"),l.levels.forEach((d,u)=>{console.log(`  [${u}] ${d.height}p @ ${(d.bitrate/1e6).toFixed(1)} Mbps`)}),console.log(`[HLS] Starting level: ${l.startLevel} (auto: ${l.autoLevelEnabled})`),console.log(`[HLS] Current level: ${l.currentLevel}, Next level: ${l.nextLevel}`),i()})}),l.on(Hls.Events.LEVEL_SWITCHED,(d,u)=>{let m=u,C=l.levels[m.level];C&&console.log(`[HLS] Switched to level ${m.level}: ${C.height}p @ ${(C.bitrate/1e6).toFixed(1)} Mbps`)}),l.on(Hls.Events.ERROR,(d,u)=>{let m=u;if(m.fatal)switch(m.type){case Hls.ErrorTypes.NETWORK_ERROR:console.error("Fatal network error encountered, trying to recover"),l.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.error("Fatal media error encountered, trying to recover"),l.recoverMediaError();break;default:console.error("Fatal error encountered, destroying HLS instance:",u),l.destroy(),e.hlsInstance=null,o(u);break}else m.details==="bufferAppendError"?(console.warn("HLS.js bufferAppendError encountered and ignored:",u),l.recoverMediaError()):console.warn("HLS.js non-fatal error:",u)})};if(window.Hls&&Hls.isSupported()){console.log("[HLS] Using HLS.js (already loaded)"),a();return}console.log("[HLS] Loading HLS.js script..."),Xe().then(()=>{Hls.isSupported()?(console.log("[HLS] HLS.js loaded and supported, using HLS.js"),a()):s?(console.log("[HLS] HLS.js not supported, falling back to native"),e.src=r,e.addEventListener("loadedmetadata",i,{once:!0})):(console.error("HLS is not supported in this browser"),o("HLS is not supported"))}).catch(l=>{if(s){console.log("[HLS] HLS.js failed to load, falling back to native"),e.src=r,e.addEventListener("loadedmetadata",i,{once:!0});return}console.error("Failed to load HLS.js:",l),o(l)})})}function p(e){if(e.videoLayoutCleanup&&(e.videoLayoutCleanup(),e.videoLayoutCleanup=null),e.hlsInstance&&(e.hlsInstance.destroy(),e.hlsInstance=null),e.src&&e.src.startsWith("blob:")){let t=e.src;URL.revokeObjectURL(t),e.src=""}}async function H(e,t=!0){try{let n=e.querySelector("video.lazy-video"),o=e.querySelector(".thumbnail");if(e.classList.contains("active")){n&&await T(n,!0);let r=e.querySelector(".project-header");r&&t&&ie(r)}else n&&(n.pause(),p(n)),o&&j(o);typeof h=="function"&&h()}catch(n){console.error("Error in handleProjectContent:",n)}}function ge(){document.querySelectorAll(".project-item.active").forEach(t=>{t.classList.remove("active");let n=t.querySelector("video.lazy-video");n&&(n.pause(),p(n));let o=t.querySelector(".project-details");o&&(o.innerHTML="");let r=t.querySelector(".thumbnail");r&&j(r)})}var g=0;function h(){let e=document.querySelectorAll(".thumbnail");e.length&&e.forEach(t=>{let n=parseInt(t.dataset.frames??"0",10),o=parseInt(t.dataset.frameWidth??"0",10),r=parseInt(t.dataset.frameHeight??"0",10),i=parseInt(t.dataset.columns??"1",10),s=Math.ceil(n/i),a=o*i,l=r*s;t.style.backgroundSize=`${a}px ${l}px`;let d=Math.floor(g)%n;d<0&&(d+=n);let u=d%i*o,m=Math.floor(d/i)*r;t.style.backgroundPosition=`-${u}px -${m}px`})}var te=window.pageYOffset||document.documentElement.scrollTop,ne=Date.now(),c=0,F=Date.now(),b=null;function be(){b!==null||document.hidden||(F=Date.now(),b=requestAnimationFrame(ve))}function N(){b!==null&&(cancelAnimationFrame(b),b=null)}function Qe(){let e=window.pageYOffset||document.documentElement.scrollTop,t=Date.now(),n=(t-ne)/1e3;n>0&&(c=(e-te)/n/3,c=Math.max(-30,Math.min(30,c))),te=e,ne=t,Math.abs(c)>.01&&be()}function ve(){if(document.hidden){N();return}let e=Date.now(),t=(e-F)/1e3;F=e;let n=15,o=Math.abs(c)*.1,r=n+o;c>0?c=Math.max(0,c-r*t):c<0&&(c=Math.min(0,c+r*t)),g+=c*t,g>1e6&&(g-=1e6),g<-1e6&&(g+=1e6),h(),Math.abs(c)>.01?b=requestAnimationFrame(ve):(c=0,N())}function Ze(){window.location.pathname==="/"||document.querySelectorAll(".project-item").forEach(n=>{n.classList.add("no-fade")}),x(),h(),window.addEventListener("scroll",Qe)}function Le(e=document){let t=e.querySelectorAll("video.lazy-video");if("IntersectionObserver"in window){let n=new IntersectionObserver((o,r)=>{o.forEach(i=>{if(i.isIntersecting){let s=i.target;T(s,!1).catch(a=>{console.error("Failed to initialize HLS player for video:",a)}),r.unobserve(s),s.dataset.loaded="true"}})},{rootMargin:"0px 0px 200px 0px",threshold:.25});t.forEach(o=>{o.dataset.loaded||n.observe(o)})}else t.forEach(n=>{T(n,!1).catch(o=>{console.error("Failed to initialize HLS player for video:",o)}),n.dataset.loaded="true"})}var P=null;function ye(e){if(e.dataset.loaded==="true")return;let t=!1,n=e.dataset.src;if(n&&(e.src=n,e.removeAttribute("data-src"),t=!0),e.querySelectorAll("source[data-src]").forEach(r=>{let i=r.dataset.src;i&&(r.src=i,r.removeAttribute("data-src"),t=!0)}),!t){e.dataset.loaded="true";return}e.dataset.loaded="true",e.load(),(e.autoplay||e.hasAttribute("autoplay"))&&e.play().catch(()=>{})}function et(){return"IntersectionObserver"in window?P||(P=new IntersectionObserver((e,t)=>{e.forEach(n=>{if(!n.isIntersecting)return;let o=n.target;t.unobserve(o),ye(o)})},{rootMargin:"0px 0px 250px 0px",threshold:.01}),P):null}function Ee(e=document){let t=e.querySelectorAll("video.lazy-inline-video"),n=et();t.forEach(o=>{o.dataset.loaded!=="true"&&(n?n.observe(o):ye(o))})}function tt(){Le(),Ee(),x(),ce(),nt()}function nt(){let e=document.querySelector(".project-item.active");e&&(document.readyState==="complete"?H(e,!1):window.addEventListener("load",()=>{H(e,!1)}))}function O(){document.querySelectorAll("video.hls-video").forEach(n=>{p(n)}),document.querySelectorAll("video").forEach(n=>{n.hlsInstance&&p(n)})}function ot(){O()}function rt(e){let{element:t,isOpen:n,smoothScroll:o=!0}=e.detail;if(!t)return;let r=t.closest(".project-item");if(r){if(n){let i=t.querySelector("video.lazy-video");i&&T(i,!0).catch(a=>{console.error("Failed to initialize HLS player:",a)});let s=r.querySelector(".project-header");s&&o&&ie(s)}else{let i=r.querySelector("video.lazy-video");i&&(i.pause(),p(i));let s=r.querySelector(".thumbnail");s&&j(s)}x(t),Le(t),Ee(t),ce(t),h(),fe(t)}}function it(){let e=document.querySelectorAll(".project-item:not(.fade-in):not(.no-fade)");me(e),x(),h()}function st(e){let{element:t}=e.detail,n=t?.closest(".project-item");n&&H(n)}function oe(e){let t=e.closest(".project-item");if(!t)return;if(document.body.dataset.isolationMode==="true")t.classList.add("fade-out"),t.addEventListener("animationend",function o(){t.removeEventListener("animationend",o);let r=new URL("/",window.location.origin);(new URLSearchParams(window.location.search).get("show_drafts")==="true"||sessionStorage.getItem("bb_show_drafts")==="true")&&r.searchParams.set("show_drafts","true"),window.location.href=r.toString()});else{t.classList.remove("active");let o=t.querySelector("video.lazy-video");o&&(o.pause(),p(o));let r=t.querySelector(".thumbnail");r&&j(r);let i=t.querySelector(".project-details");i&&(i.innerHTML="")}}function lt(){document.body.addEventListener("project:afterSwap",rt),document.body.addEventListener("project:beforeSwap",ot),document.body.addEventListener("project:loaded",st),document.body.addEventListener("projects:loaded",it),document.body.addEventListener("project:error",()=>{w("Failed to load content. Please try again.",!0)}),document.body.addEventListener("click",e=>{let n=e.target.closest(".copy-text-link");if(n){e.preventDefault();let o=n.getAttribute("data-copy-text"),r=n.getAttribute("data-notification-message")||"URL copied to clipboard!";o?_(o,r):(console.warn("No copy text provided for copying."),w("No content available to copy.",!0))}}),document.body.addEventListener("click",function(e){let t=e.target.closest(".close-project");t&&document.body.dataset.isolationMode==="true"&&(e.preventDefault(),oe(t))}),document.body.addEventListener("click",function(e){let t=e.target,n=t.closest(".project-content img");if(n){e.preventDefault(),Fe(n);return}let o=t.closest(".project-content video");!o||!ae(o)||(e.preventDefault(),Ne(o))}),document.addEventListener("keydown",function(e){if(e.key==="Escape"){if(document.body.classList.contains("editing")||q())return;let t=document.querySelector(".project-item.active");if(t){let n=t.querySelector(".close-project");if(n)if(document.body.dataset.isolationMode==="true")oe(n);else{let r=t.dataset.slug;r&&window.ProjectLoader&&window.ProjectLoader.closeProject(r)}}}}),document.addEventListener("visibilitychange",()=>{document.hidden?N():Math.abs(c)>.01&&be()})}function re(){if(window.location.hash){let e=document.getElementById(window.location.hash.slice(1));e&&e.scrollIntoView({behavior:"smooth"})}}function at(){Ze(),tt(),$e(),fe(),window.addEventListener("beforeunload",O)}function ct(){at(),lt(),window.addEventListener("load",re),window.addEventListener("hashchange",re)}typeof window<"u"&&(window.copyToClipboard=_,window.handleProjectContent=H,window.closeAllOpenProjects=ge,window.cleanupActiveHLSPlayers=O);var dt={init:ct,handleProjectContent:H,closeAllOpenProjects:ge,cleanupActiveHLSPlayers:O,copyToClipboard:_,updateThumbnails:h,setupHLSPlayer:T,destroyHLSPlayer:p},Se=dt;var $=new WeakMap,we=!1;function ut(e){return e.dataset.autoHeight!=="false"}function ft(){we||(we=!0,window.addEventListener("message",e=>{if(!e.source||typeof e.data!="object"||e.data?.type!=="sandbox-resize")return;let t=$.get(e.source);t&&e.data.nonce===t.nonce&&ut(t.iframe)&&(t.iframe.style.height=`${e.data.height}px`)}))}function mt(){return crypto.randomUUID()}function pt(e,t){return`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
  </style>
</head>
<body>
${e}
<script>
(function() {
  var nonce = "${t}";
  function reportHeight() {
    var height = Math.max(
      document.body.scrollHeight,
      document.documentElement.scrollHeight
    );
    window.parent.postMessage({ type: 'sandbox-resize', nonce: nonce, height: height }, '*');
  }
  new ResizeObserver(reportHeight).observe(document.body);
  window.addEventListener('load', reportHeight);
  reportHeight();
})();
<\/script>
</body>
</html>`}function Te(e,t={}){ft();let n=document.createElement("iframe");n.className="html-block-sandbox";let o=["allow-scripts"];t.allowFullscreen!==!1&&n.setAttribute("allow","fullscreen"),t.allowPointerLock&&o.push("allow-pointer-lock"),n.setAttribute("sandbox",o.join(" "));let r=mt();return n.srcdoc=pt(e,r),n.style.minHeight=`${t.minHeight??60}px`,n.dataset.autoHeight="true",n.addEventListener("load",()=>{n.contentWindow&&$.set(n.contentWindow,{iframe:n,nonce:r})}),n}function He(e){e.contentWindow&&$.delete(e.contentWindow)}var v=null;function Me(e){let t=e.getAttribute("data-html-b64");if(t)try{let n=atob(t),o=Te(n,{allowFullscreen:!0}),r=e.getAttribute("style"),i=!!r&&/(^|;)\s*height\s*:/.test(r);o.dataset.autoHeight=i?"false":"true",r&&(o.style.cssText+=`; ${r}`),e.replaceWith(o)}catch(n){console.error("Failed to decode HTML block:",n)}}function ht(){return"IntersectionObserver"in window?v||(v=new IntersectionObserver((e,t)=>{e.forEach(n=>{n.isIntersecting&&(t.unobserve(n.target),Me(n.target))})},{rootMargin:"0px 0px 250px 0px",threshold:.01}),v):null}function z(e=document){let t=e.querySelectorAll(".html-block-sandbox[data-html-b64]"),n=ht();t.forEach(o=>{if(n){n.observe(o);return}Me(o)})}function gt(e=document){v&&e.querySelectorAll(".html-block-sandbox[data-html-b64]").forEach(t=>{v?.unobserve(t)}),e.querySelectorAll("iframe.html-block-sandbox").forEach(t=>{t instanceof HTMLIFrameElement&&He(t)})}function bt(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>z()):z(),document.body.addEventListener("project:afterSwap",e=>{let n=e.detail?.element||document;z(n)}),document.body.addEventListener("project:beforeSwap",e=>{let n=e.detail?.element||document;gt(n)})}Se.init();Z.init();bt();})();
//# sourceMappingURL=project-bundle.js.map
