// Auto-generated by esbuild - do not edit directly

"use strict";(()=>{var ht="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",gt="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js",vt="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js";function ye(e,t){let n=document.createElement("script");n.type="text/javascript",n.onload=function(){t&&t()},n.src=e,document.head.appendChild(n)}function bt(e,t){let n=document.createElement("link");n.rel="stylesheet",n.href=e,n.onload=function(){t&&t()},document.head.appendChild(n)}function Lt(e){bt(ht,function(){ye(gt,function(){ye(vt,function(){e&&e()})})})}function Te(e){e.querySelector("pre code")&&(typeof window.Prism>"u"?Lt(function(){window.Prism?.highlightAllUnder(e)}):window.Prism.highlightAllUnder(e))}var Et="https://cdn.jsdelivr.net/npm/hls.js@1.5.12",yt="application/vnd.apple.mpegurl",He={abrEwmaDefaultEstimate:5e6,capLevelToPlayerSize:!0},F=null;function G(){return window.Hls?Promise.resolve():F||(F=new Promise((e,t)=>{let n=document.createElement("script");n.src=document.body.dataset.hlsJsSrc||Et,n.async=!0,n.onload=()=>e(),n.onerror=()=>t(new Error("Failed to load HLS.js")),document.head.appendChild(n)}),F)}function Se(e){return!!e.canPlayType(yt)}function J(e){e.hlsInstance&&(e.hlsInstance.destroy(),e.hlsInstance=null)}function y(e,t=!1){let n=document.createElement("div");n.className=`copy-notification${t?" error":""}`,n.textContent=e,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&document.body.removeChild(n)},4e3)}function Z(e,t="URL copied to clipboard!"){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(()=>{y(t)}).catch(n=>{console.error("Failed to copy using Clipboard API: ",n),y("Failed to copy the URL.",!0)}):(console.warn("Clipboard API not supported in this browser."),y("Copy to clipboard not supported in this browser.",!0))}function Q(e){let t=e.startsWith("#")?e.slice(1):e;if(!t)return null;let n=t;try{n=decodeURIComponent(t)}catch{n=t}let o=document.getElementById(n)||document.getElementById(t);if(o)return o;let r=n.replace(/_\d+$/,"");if(r&&r!==n){let s=document.getElementById(r);if(s)return s}let i=t.replace(/_\d+$/,"");if(i&&i!==t){let s=document.getElementById(i);if(s)return s}return null}function Me(e="auto"){let t=Q(window.location.hash);t&&t.scrollIntoView({behavior:e,block:"start"})}var M="data-scroll-lock-count",te="data-scroll-lock-y";function B(){let e=document.body,t=Number(e.getAttribute(M)||"0");if(t===0){let n=window.scrollY||window.pageYOffset||0;e.setAttribute(te,String(n)),e.classList.add("modal-open"),e.style.position="fixed",e.style.top=`-${n}px`,e.style.left="0",e.style.right="0",e.style.width="100%",e.style.overflow="hidden"}e.setAttribute(M,String(t+1))}function ee(){let e=document.body,t=Number(e.getAttribute(M)||"0");if(t<=0){e.classList.remove("modal-open");return}if(t>1){e.setAttribute(M,String(t-1));return}let n=Number(e.getAttribute(te)||"0");e.removeAttribute(M),e.removeAttribute(te),e.classList.remove("modal-open"),e.style.position="",e.style.top="",e.style.left="",e.style.right="",e.style.width="",e.style.overflow="";let o=document.documentElement,r=o.style.scrollBehavior;o.style.scrollBehavior="auto",window.scrollTo({top:n,left:0,behavior:"auto"}),requestAnimationFrame(()=>{r?o.style.scrollBehavior=r:o.style.removeProperty("scroll-behavior")})}var we="lightbox-trigger-video";function xe(e){if(e.dataset.closing==="true")return;e.dataset.closing="true";let t=e.querySelector("video");t&&t.pause(),ee(),e.classList.remove("visible"),e.addEventListener("transitionend",()=>e.remove(),{once:!0})}function q(){let e=document.querySelector(".image-lightbox");return e?(xe(e),!0):!1}function Tt(e){return e.controls||e.hasAttribute("controls")}function ne(e){return!e.closest(".project-content")||e.closest(".video-container")||e.dataset.lightbox==="off"||Tt(e)?!1:e.loop||e.autoplay||e.hasAttribute("loop")||e.hasAttribute("autoplay")}function oe(e=document){e.querySelectorAll(".project-content video").forEach(n=>{n.classList.toggle(we,ne(n))})}function Ae(){let e=document.createElement("div");e.className="image-lightbox";let t=document.createElement("button");return t.className="image-lightbox-close",t.setAttribute("type","button"),t.setAttribute("aria-label","Close media"),t.innerHTML="&times;",e.appendChild(t),{overlay:e,closeButton:t}}function Pe(e,t){let n=()=>xe(e);t.addEventListener("click",n),e.addEventListener("click",o=>{o.target===e&&n()})}function Ie(e){q();let{overlay:t,closeButton:n}=Ae(),o=document.createElement("img");o.src=e.currentSrc||e.src,o.alt=e.alt||"",t.appendChild(o),document.body.appendChild(t),B(),requestAnimationFrame(()=>t.classList.add("visible")),Pe(t,n)}function ke(e){q();let{overlay:t,closeButton:n}=Ae(),o=e.cloneNode(!0);o.removeAttribute("id"),o.classList.remove("lazy-video","lazy-inline-video","hls-video",we);let r=e.autoplay||e.hasAttribute("autoplay")||e.loop||e.hasAttribute("loop"),i=e.loop||e.hasAttribute("loop");o.controls=!1,o.removeAttribute("controls"),o.autoplay=r,o.loop=i,o.muted=!0,o.defaultMuted=!0,o.playsInline=!0,o.preload="auto",r?o.setAttribute("autoplay",""):o.removeAttribute("autoplay"),i?o.setAttribute("loop",""):o.removeAttribute("loop"),o.setAttribute("muted",""),o.setAttribute("playsinline",""),e.currentSrc&&(o.src=e.currentSrc),t.appendChild(o),document.body.appendChild(t),B(),requestAnimationFrame(()=>{t.classList.add("visible"),r&&o.play().catch(()=>{})}),Pe(t,n)}function je(e){if(!Number.isFinite(e)||e<0)return"0:00";let t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%60);return t>0?`${t}:${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${n}:${o.toString().padStart(2,"0")}`}var z=new WeakMap;function v(e){let t=z.get(e);return t||(t={isDragging:!1,hideTimeout:null,controlsVisible:!0},z.set(e,t)),t}function Ht(e){return`
    <div class="video-controls" data-for="${e}">
      <button class="vc-play-overlay" aria-label="Play" type="button">
        <svg class="vc-play-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M8 5v14l11-7z"/>
        </svg>
        <svg class="vc-pause-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
        </svg>
      </button>
      <div class="vc-bottom-bar">
        <button class="vc-play-btn" aria-label="Play" type="button">
          <svg class="vc-play-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M8 5v14l11-7z"/>
          </svg>
          <svg class="vc-pause-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
          </svg>
        </button>
        <span class="vc-time vc-current-time" aria-live="off">0:00</span>
        <div class="vc-progress-container" role="slider" aria-label="Video progress" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0">
          <div class="vc-progress-track">
            <div class="vc-progress-buffered"></div>
            <div class="vc-progress-played"></div>
            <div class="vc-progress-thumb" aria-hidden="true"></div>
          </div>
        </div>
        <span class="vc-time vc-duration" aria-live="off">0:00</span>
        <button class="vc-mute-btn" aria-label="Mute" type="button">
          <svg class="vc-unmuted-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
          </svg>
          <svg class="vc-muted-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
          </svg>
        </button>
        <button class="vc-fullscreen-btn" aria-label="Toggle fullscreen" type="button">
          <svg class="vc-fullscreen-enter" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
          </svg>
          <svg class="vc-fullscreen-exit" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
          </svg>
        </button>
      </div>
    </div>
  `}function re(e,t){let n=e.duration||0,o=e.currentTime||0,r=n>0?o/n*100:0,i=t.querySelector(".vc-progress-played"),s=t.querySelector(".vc-progress-thumb"),a=t.querySelector(".vc-progress-container");i&&(i.style.width=`${r}%`),s&&(s.style.left=`${r}%`),a&&a.setAttribute("aria-valuenow",Math.round(r).toString())}function St(e,t){let n=e.duration||0;if(n<=0)return;let o=e.buffered,r=0;for(let a=0;a<o.length;a++)o.start(a)<=e.currentTime&&(r=Math.max(r,o.end(a)));let i=r/n*100,s=t.querySelector(".vc-progress-buffered");s&&(s.style.width=`${i}%`)}function N(e,t){let n=t.querySelector(".vc-current-time"),o=t.querySelector(".vc-duration");n&&(n.textContent=je(e.currentTime)),o&&(o.textContent=je(e.duration))}function $(e,t){let n=e.paused;t.classList.toggle("is-playing",!n),t.classList.toggle("is-paused",n);let o=t.querySelector(".vc-play-overlay"),r=t.querySelector(".vc-play-btn"),i=n?"Play":"Pause";o&&o.setAttribute("aria-label",i),r&&r.setAttribute("aria-label",i)}function Ce(e,t){let n=e.muted;t.classList.toggle("is-muted",n);let o=t.querySelector(".vc-mute-btn");o&&o.setAttribute("aria-label",n?"Unmute":"Mute")}function Ve(e,t){let n=e,o=!!document.fullscreenElement||!!n.webkitDisplayingFullscreen;t.classList.toggle("is-fullscreen",o);let r=t.querySelector(".vc-fullscreen-btn");r&&r.setAttribute("aria-label",o?"Exit fullscreen":"Enter fullscreen")}function w(e,t){let n=v(e);n.controlsVisible=!0,t.classList.add("vc-visible"),n.hideTimeout&&(clearTimeout(n.hideTimeout),n.hideTimeout=null)}function x(e,t,n=2500){let o=v(e);o.hideTimeout&&clearTimeout(o.hideTimeout),!(e.paused||o.isDragging)&&(o.hideTimeout=window.setTimeout(()=>{!e.paused&&!o.isDragging&&(o.controlsVisible=!1,t.classList.remove("vc-visible")),o.hideTimeout=null},n))}function De(e,t){let n=v(e);n.controlsVisible?e.paused||(n.controlsVisible=!1,t.classList.remove("vc-visible")):(w(e,t),x(e,t))}function Oe(e,t,n){let o=t.querySelector(".vc-progress-container");if(!o||!e.duration)return;let r=o.getBoundingClientRect(),s=Math.max(0,Math.min(n-r.left,r.width))/r.width;e.currentTime=s*e.duration,re(e,t),N(e,t)}function Mt(e,t,n){n.preventDefault(),n.stopPropagation();let o=v(e);o.isDragging=!0,t.classList.add("vc-dragging");let r="touches"in n&&n.touches[0]?n.touches[0].clientX:n.clientX;Oe(e,t,r);let i=a=>{let l="touches"in a&&a.touches[0]?a.touches[0].clientX:a.clientX;Oe(e,t,l)},s=()=>{o.isDragging=!1,t.classList.remove("vc-dragging"),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",s),x(e,t)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",s),document.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("touchend",s)}function wt(e,t){let n=e.duration*.05||5;switch(t.key){case"ArrowLeft":t.preventDefault(),e.currentTime=Math.max(0,e.currentTime-n);break;case"ArrowRight":t.preventDefault(),e.currentTime=Math.min(e.duration||0,e.currentTime+n);break;case"Home":t.preventDefault(),e.currentTime=0;break;case"End":t.preventDefault(),e.currentTime=e.duration||0;break}}function xt(e,t){let n=e;n.webkitEnterFullscreen?n.webkitDisplayingFullscreen?n.webkitExitFullscreen?.():n.webkitEnterFullscreen():document.fullscreenElement?document.exitFullscreen().catch(()=>{}):t.requestFullscreen().catch(()=>{})}function At(e,t){let n=e.closest(".video-container"),o=()=>{v(e).isDragging||(re(e,t),N(e,t))},r=()=>St(e,t),i=()=>N(e,t),s=()=>{N(e,t),re(e,t)},a=()=>{$(e,t),x(e,t,1500)},l=()=>{$(e,t),w(e,t)},c=()=>{$(e,t),w(e,t)},u=()=>Ce(e,t),m=()=>Ve(e,t);e.addEventListener("timeupdate",o),e.addEventListener("progress",r),e.addEventListener("durationchange",i),e.addEventListener("loadedmetadata",s),e.addEventListener("play",a),e.addEventListener("pause",l),e.addEventListener("ended",c),e.addEventListener("volumechange",u),document.addEventListener("fullscreenchange",m),e.addEventListener("webkitbeginfullscreen",m),e.addEventListener("webkitendfullscreen",m);let h=t.querySelector(".vc-play-overlay"),C=t.querySelector(".vc-play-btn"),E=t.querySelector(".vc-progress-container"),fe=t.querySelector(".vc-mute-btn"),pe=t.querySelector(".vc-fullscreen-btn"),V=d=>{d.stopPropagation(),e.paused?e.play().catch(()=>{}):e.pause()},he=d=>{d.stopPropagation(),e.muted=!e.muted},D=d=>{let Ee=d.target;Ee.closest("button")||Ee.closest(".vc-progress-container")||(d.stopPropagation(),De(e,t))},O=d=>{d.preventDefault(),De(e,t)},R=d=>{Mt(e,t,d)},ge=d=>{wt(e,d)},ve=d=>{d.stopPropagation(),n&&xt(e,n)},be=()=>{w(e,t),x(e,t)},Le=()=>{let d=v(e);!e.paused&&!d.isDragging&&(d.controlsVisible=!1,t.classList.remove("vc-visible"))};return h?.addEventListener("click",V),C?.addEventListener("click",V),fe?.addEventListener("click",he),E?.addEventListener("mousedown",R),E?.addEventListener("touchstart",R,{passive:!1}),E?.addEventListener("keydown",ge),pe?.addEventListener("click",ve),t.addEventListener("click",D),t.addEventListener("touchend",D),e.addEventListener("click",O),e.addEventListener("touchend",O),n?.addEventListener("mousemove",be),n?.addEventListener("mouseleave",Le),$(e,t),Ce(e,t),Ve(e,t),w(e,t),e.paused||x(e,t),()=>{let d=v(e);d.hideTimeout&&clearTimeout(d.hideTimeout),e.removeEventListener("timeupdate",o),e.removeEventListener("progress",r),e.removeEventListener("durationchange",i),e.removeEventListener("loadedmetadata",s),e.removeEventListener("play",a),e.removeEventListener("pause",l),e.removeEventListener("ended",c),e.removeEventListener("volumechange",u),document.removeEventListener("fullscreenchange",m),e.removeEventListener("webkitbeginfullscreen",m),e.removeEventListener("webkitendfullscreen",m),h?.removeEventListener("click",V),C?.removeEventListener("click",V),fe?.removeEventListener("click",he),E?.removeEventListener("mousedown",R),E?.removeEventListener("touchstart",R),E?.removeEventListener("keydown",ge),pe?.removeEventListener("click",ve),t.removeEventListener("click",D),t.removeEventListener("touchend",D),e.removeEventListener("click",O),e.removeEventListener("touchend",O),n?.removeEventListener("mousemove",be),n?.removeEventListener("mouseleave",Le),z.delete(e)}}function Re(e){let t=e.closest(".video-container");if(!t||t.querySelector(".video-controls"))return null;e.removeAttribute("controls");let n=e.id||`video-${Date.now()}`;e.id||(e.id=n),t.insertAdjacentHTML("beforeend",Ht(n)),t.classList.add("has-video-controls");let o=t.querySelector(".video-controls");if(!o)return null;let r=At(e,o);return()=>{r(),o.remove(),t.classList.remove("has-video-controls")}}function Fe(e){let t=e.closest(".video-container");if(!t)return;let n=t.querySelector(".video-controls");if(!n)return;let o=v(e);o.hideTimeout&&clearTimeout(o.hideTimeout),z.delete(e),n.remove(),t.classList.remove("has-video-controls")}function U(e){e&&(e.style.backgroundPosition="0 0")}function $e(e){let r=e.getBoundingClientRect().top+window.pageYOffset-40;window.scrollTo({top:r,behavior:"smooth"})}function Ne(e=document){let t=e.querySelectorAll("a[href]"),n=window.location.host;t.forEach(o=>{let r=o.getAttribute("href");if(r&&!(r.startsWith("#")||r.startsWith("/")||r.startsWith("../")||r.startsWith("mailto:")||r.startsWith("tel:")))try{new URL(r,window.location.origin).host!==n&&(o.setAttribute("target","_blank"),o.setAttribute("rel","noopener noreferrer"))}catch{}})}function Pt(e,t){e.forEach(n=>{if(n.isIntersecting){let o=n.target;o.classList.add("fade-in"),t.unobserve(o)}})}var It=new IntersectionObserver(Pt,{root:null,rootMargin:"0px",threshold:.1});function ze(e){e.forEach(t=>{!t.classList.contains("fade-in")&&!t.classList.contains("no-fade")&&It.observe(t)})}function kt(){let e=document.querySelectorAll(".project-item");ze(e)}function jt(e,t){e.forEach(n=>{if(n.isIntersecting){let o=n.target,r=o.getAttribute("data-bg");if(r){let i=new Image;i.onload=()=>{o.style.backgroundImage=`url('${r}')`,o.removeAttribute("data-bg"),requestAnimationFrame(()=>{o.classList.remove("lazy-thumbnail")})},i.src=r}t.unobserve(o)}})}var Ct=new IntersectionObserver(jt,{rootMargin:"0px 0px 50px 0px",threshold:.1});function W(e=document){e.querySelectorAll(".lazy-thumbnail").forEach(n=>{n.getAttribute("data-bg")&&Ct.observe(n)})}var Vt=768,Dt=.0015,Ot=document.body.dataset.debugHls==="true";function f(...e){Ot&&console.log(...e)}function _e(e){return e.closest(".video-container")}function A(e){if(e==null||e==="")return null;let t=typeof e=="number"?e:Number.parseFloat(e);return Number.isFinite(t)&&t>0?t:null}function Ue(e){let t=A(e.dataset.videoWidth),n=A(e.dataset.videoHeight);if(t&&n)return t/n;let o=e.videoWidth,r=e.videoHeight;return o>0&&r>0?o/r:null}function We(e){let t=_e(e);if(!t)return;let n=Ue(e);n&&t.style.setProperty("--video-aspect-ratio",n.toString())}function Rt(e){e.videoLayoutCleanup&&e.videoLayoutCleanup();let t=()=>We(e);e.addEventListener("loadedmetadata",t),e.addEventListener("resize",t),t(),e.videoLayoutCleanup=()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("resize",t)}}function Ft(e,t){let n=Ue(t),r=_e(t)?.getBoundingClientRect()?.height??t.clientHeight??0;if(r<=0)return null;let i=e.levels.map((c,u)=>{let m=A(c.height);if(!m)return null;let h=A(c.width),C=n&&h?Math.abs(h/m-n):0;return{index:u,width:h,height:m,bitrate:A(c.bitrate)??0,aspectDrift:C}}).filter(c=>c!==null);if(!i.length)return null;let s=i;if(n){let c=i.filter(u=>u.width!==null&&u.aspectDrift<=Dt);c.length&&(s=c)}let a=[...s].sort((c,u)=>c.height!==u.height?c.height-u.height:u.bitrate-c.bitrate),l=a.find(c=>c.height>=r*.95);return l?l.index:a[a.length-1]?.index??null}function Bt(e,t){let n=Ft(e,t);if(n===null)return;let o=e.levels[n];f("[HLS] Stable start level selected",{level:n,resolution:o?`${o.width??"?"}x${o.height}`:"unknown",bitrate:o?.bitrate}),e.startLevel=n,window.innerWidth<=Vt&&(e.loadLevel=n,e.nextLevel=n,e.currentLevel=n)}function Ke(){return G()}function P(e,t=!1){return f("[HLS] setupHLSPlayer called",{autoplay:t}),e.dataset.loaded="true",new Promise((n,o)=>{let r=e.dataset.hlsUrl;if(f("[HLS] Stream URL:",r),!r){console.error("No HLS URL provided for video element"),o("No HLS URL provided");return}e.classList.add("hls-video"),Rt(e);let i=()=>{if(We(e),Re(e),document.body.classList.contains("editing")){e.pause(),n();return}t&&e.paused&&e.play().catch(l=>{l.name!=="AbortError"&&console.error("Autoplay failed:",l)}),n()},s=Se(e);f("[HLS] Native HLS support:",s?"yes":"no"),f("[HLS] HLS.js loaded:",!!window.Hls),f("[HLS] HLS.js supported:",window.Hls?Hls.isSupported():"n/a");let a=()=>{if(!window.Hls||!Hls.isSupported()){if(s){e.src=r,t&&!document.body.classList.contains("editing")&&e.play().catch(()=>{}),e.addEventListener("loadedmetadata",i,{once:!0});return}console.error("HLS is not supported in this browser"),o("HLS is not supported");return}e.hlsInstance&&(console.warn("HLS instance already exists for this video element. Destroying existing instance."),J(e));let l=new Hls(He);e.hlsInstance=l,l.loadSource(r),l.attachMedia(e),l.on(Hls.Events.MEDIA_ATTACHED,()=>{l.on(Hls.Events.MANIFEST_PARSED,()=>{Bt(l,e),f("[HLS] Available quality levels:"),l.levels.forEach((c,u)=>{f(`  [${u}] ${c.width??"?"}x${c.height} @ ${(c.bitrate/1e6).toFixed(1)} Mbps`)}),f(`[HLS] Starting level: ${l.startLevel} (auto: ${l.autoLevelEnabled})`),f(`[HLS] Current level: ${l.currentLevel}, Next level: ${l.nextLevel}`),i()})}),l.on(Hls.Events.LEVEL_SWITCHED,(c,u)=>{let m=u,h=l.levels[m.level];h&&f(`[HLS] Switched to level ${m.level}: ${h.height}p @ ${(h.bitrate/1e6).toFixed(1)} Mbps`)}),l.on(Hls.Events.ERROR,(c,u)=>{let m=u;if(m.fatal)switch(m.type){case Hls.ErrorTypes.NETWORK_ERROR:console.error("Fatal network error encountered, trying to recover"),l.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.error("Fatal media error encountered, trying to recover"),l.recoverMediaError();break;default:console.error("Fatal error encountered, destroying HLS instance:",u),l.destroy(),e.hlsInstance=null,o(u);break}else m.details==="bufferAppendError"?(console.warn("HLS.js bufferAppendError encountered and ignored:",u),l.recoverMediaError()):console.warn("HLS.js non-fatal error:",u)})};if(window.Hls&&Hls.isSupported()){f("[HLS] Using HLS.js (already loaded)"),a();return}f("[HLS] Loading HLS.js script..."),G().then(()=>{Hls.isSupported()?(f("[HLS] HLS.js loaded and supported, using HLS.js"),a()):s?(f("[HLS] HLS.js not supported, falling back to native"),e.src=r,t&&!document.body.classList.contains("editing")&&e.play().catch(()=>{}),e.addEventListener("loadedmetadata",i,{once:!0})):(console.error("HLS is not supported in this browser"),o("HLS is not supported"))}).catch(l=>{if(s){f("[HLS] HLS.js failed to load, falling back to native"),e.src=r,t&&!document.body.classList.contains("editing")&&e.play().catch(()=>{}),e.addEventListener("loadedmetadata",i,{once:!0});return}console.error("Failed to load HLS.js:",l),o(l)})})}function b(e){if(e.videoLayoutCleanup&&(e.videoLayoutCleanup(),e.videoLayoutCleanup=null),Fe(e),J(e),delete e.dataset.loaded,e.src&&e.src.startsWith("blob:")){let t=e.src;URL.revokeObjectURL(t),e.src=""}}async function se(e,t=!0){try{let n=e.querySelector("video.lazy-video"),o=e.querySelector(".thumbnail");if(e.classList.contains("active")){n&&await P(n,!0);let r=e.querySelector(".project-header");r&&t&&$e(r)}else n&&(n.pause(),b(n)),o&&U(o);typeof L=="function"&&L()}catch(n){console.error("Error in handleProjectContent:",n)}}function qt(){document.querySelectorAll(".project-item.active").forEach(t=>{t.classList.remove("active");let n=t.querySelector("video.lazy-video");n&&(n.pause(),b(n));let o=t.querySelector(".project-details");o&&(o.innerHTML="");let r=t.querySelector(".thumbnail");r&&U(r)})}var T=0;function L(){let e=document.querySelectorAll(".thumbnail");e.length&&e.forEach(t=>{let n=parseInt(t.dataset.frames??"0",10),o=parseInt(t.dataset.frameWidth??"0",10),r=parseInt(t.dataset.frameHeight??"0",10),i=parseInt(t.dataset.columns??"1",10),s=Math.ceil(n/i),a=o*i,l=r*s;t.style.backgroundSize=`${a}px ${l}px`;let c=Math.floor(T)%n;c<0&&(c+=n);let u=c%i*o,m=Math.floor(c/i)*r;t.style.backgroundPosition=`-${u}px -${m}px`})}var Be=window.pageYOffset||document.documentElement.scrollTop,qe=Date.now(),p=0,ae=Date.now(),H=null;function Xe(){H!==null||document.hidden||(ae=Date.now(),H=requestAnimationFrame(Ye))}function le(){H!==null&&(cancelAnimationFrame(H),H=null)}function $t(){let e=window.pageYOffset||document.documentElement.scrollTop,t=Date.now(),n=(t-qe)/1e3;n>0&&(p=(e-Be)/n/3,p=Math.max(-30,Math.min(30,p))),Be=e,qe=t,Math.abs(p)>.01&&Xe()}function Ye(){if(document.hidden){le();return}let e=Date.now(),t=(e-ae)/1e3;ae=e;let n=15,o=Math.abs(p)*.1,r=n+o;p>0?p=Math.max(0,p-r*t):p<0&&(p=Math.min(0,p+r*t)),T+=p*t,T>1e6&&(T-=1e6),T<-1e6&&(T+=1e6),L(),Math.abs(p)>.01?H=requestAnimationFrame(Ye):(p=0,le())}function Nt(){window.location.pathname==="/"||document.querySelectorAll(".project-item").forEach(n=>{n.classList.add("no-fade")}),W(),L(),window.addEventListener("scroll",$t)}function Ge(e=document){let t=e.querySelectorAll("video.lazy-video");if("IntersectionObserver"in window){let n=new IntersectionObserver((o,r)=>{o.forEach(i=>{if(i.isIntersecting){let s=i.target;if(s.dataset.loaded==="true"){r.unobserve(s);return}P(s,!1).catch(a=>{console.error("Failed to initialize HLS player for video:",a)}),r.unobserve(s),s.dataset.loaded="true"}})},{rootMargin:"0px 0px 200px 0px",threshold:.25});t.forEach(o=>{o.dataset.loaded||n.observe(o)})}else t.forEach(n=>{P(n,!1).catch(o=>{console.error("Failed to initialize HLS player for video:",o)}),n.dataset.loaded="true"})}var _=null;function Je(e){if(e.dataset.loaded==="true")return;let t=!1,n=e.dataset.src;if(n&&(e.src=n,e.removeAttribute("data-src"),t=!0),e.querySelectorAll("source[data-src]").forEach(r=>{let i=r.dataset.src;i&&(r.src=i,r.removeAttribute("data-src"),t=!0)}),!t){e.dataset.loaded="true";return}e.dataset.loaded="true",e.load(),(e.autoplay||e.hasAttribute("autoplay"))&&e.play().catch(()=>{})}function zt(){return"IntersectionObserver"in window?_||(_=new IntersectionObserver((e,t)=>{e.forEach(n=>{if(!n.isIntersecting)return;let o=n.target;t.unobserve(o),Je(o)})},{rootMargin:"0px 0px 250px 0px",threshold:.01}),_):null}function Ze(e=document){let t=e.querySelectorAll("video.lazy-inline-video"),n=zt();t.forEach(o=>{o.dataset.loaded!=="true"&&(n?n.observe(o):Je(o))})}function _t(){Ge(),Ze(),W(),oe(),Ut()}function Ut(){let e=document.querySelector(".project-item.active");e&&(document.readyState==="complete"?se(e,!1):window.addEventListener("load",()=>{se(e,!1)}))}function ce(){document.querySelectorAll("video.hls-video").forEach(n=>{b(n)}),document.querySelectorAll("video").forEach(n=>{n.hlsInstance&&b(n)})}function Wt(){ce()}function Kt(e){let{element:t,isOpen:n,smoothScroll:o=!0}=e.detail;if(!t)return;let r=t.closest(".project-item");if(r){if(n){let i=t.querySelector("video.lazy-video");i&&P(i,!0).catch(a=>{console.error("Failed to initialize HLS player:",a)});let s=r.querySelector(".project-header");s&&o&&$e(s)}else{let i=r.querySelector("video.lazy-video");i&&(i.pause(),b(i));let s=r.querySelector(".thumbnail");s&&U(s)}W(t),Ge(t),Ze(t),oe(t),L(),Ne(t)}}function Xt(){let e=document.querySelectorAll(".project-item:not(.fade-in):not(.no-fade)");ze(e),W(),L()}function Yt(){let e=new URL("/",window.location.origin);return(new URLSearchParams(window.location.search).get("show_drafts")==="true"||sessionStorage.getItem("bb_show_drafts")==="true")&&e.searchParams.set("show_drafts","true"),e}function Qe(){window.location.href=Yt().toString()}function ie(e){let t=e.closest(".project-item");if(!t)return;if(document.body.dataset.isolationMode==="true"){if(t.dataset.closing==="true")return;t.dataset.closing="true",t.classList.add("fade-out"),t.addEventListener("animationend",function(r){r.target!==t||r.animationName!=="fadeOut"||Qe()},{once:!0})}else{t.classList.remove("active");let o=t.querySelector("video.lazy-video");o&&(o.pause(),b(o));let r=t.querySelector(".thumbnail");r&&U(r);let i=t.querySelector(".project-details");i&&(i.innerHTML="")}}function Gt(){document.body.addEventListener("project:afterSwap",Kt),document.body.addEventListener("project:beforeSwap",Wt),document.body.addEventListener("projects:loaded",Xt),document.body.addEventListener("project:error",()=>{y("Failed to load content. Please try again.",!0)}),document.body.addEventListener("click",e=>{let n=e.target.closest(".copy-text-link");if(n){e.preventDefault();let o=n.getAttribute("data-copy-text"),r=n.getAttribute("data-notification-message")||"URL copied to clipboard!";o?Z(o,r):(console.warn("No copy text provided for copying."),y("No content available to copy.",!0))}}),document.body.addEventListener("click",function(e){let t=e.target.closest(".close-project");t&&document.body.dataset.isolationMode==="true"&&(e.preventDefault(),ie(t))}),document.body.addEventListener("click",function(e){let t=e.target.closest("a.site-title");if(!t||e.defaultPrevented||e.button!==0||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||t.target&&t.target!=="_self")return;let n;try{n=new URL(t.href,window.location.origin)}catch{return}if(n.origin!==window.location.origin||n.pathname!=="/")return;if(!(document.body.dataset.isolationMode==="true")){if(window.location.pathname==="/me")try{let s=document.referrer?new URL(document.referrer):null;if(!!s&&s.origin===window.location.origin&&s.pathname==="/"){e.preventDefault(),window.history.back();return}}catch{}return}e.preventDefault();let i=document.querySelector(".project-item.active")?.querySelector(".close-project");if(i){ie(i);return}Qe()}),document.body.addEventListener("click",function(e){let t=e.target,n=t.closest(".project-content img");if(n){e.preventDefault(),Ie(n);return}let o=t.closest(".project-content video");!o||!ne(o)||(e.preventDefault(),ke(o))}),document.body.addEventListener("click",function(e){let t=e.target.closest('.project-content a[href^="#"]');if(!t||e.defaultPrevented||e.button!==0||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;let n=t.getAttribute("href")||"",o=Q(n);if(!o)return;e.preventDefault();let r=new URL(window.location.href);r.hash=o.id,history.pushState(history.state,"",r.toString()),o.scrollIntoView({behavior:"smooth",block:"start"}),requestAnimationFrame(()=>{o.scrollIntoView({behavior:"auto",block:"start"})}),setTimeout(()=>{o.scrollIntoView({behavior:"auto",block:"start"})},180)}),document.addEventListener("keydown",function(e){if(e.key==="Escape"){if(document.body.classList.contains("editing")||q())return;let t=document.querySelector(".project-item.active");if(t){let n=t.querySelector(".close-project");if(n)if(document.body.dataset.isolationMode==="true")ie(n);else{let r=t.dataset.slug;r&&K(r)}}}}),document.addEventListener("visibilitychange",()=>{document.hidden?le():Math.abs(p)>.01&&Xe()})}function Jt(){Nt(),_t(),kt(),Ne(),window.addEventListener("beforeunload",ce)}function Zt(){Jt(),Gt(),window.addEventListener("load",()=>Me("auto"))}var Qt={init:Zt,handleProjectContent:se,closeAllOpenProjects:qt,cleanupActiveHLSPlayers:ce,copyToClipboard:Z,updateThumbnails:L,setupHLSPlayer:P,destroyHLSPlayer:b},et=Qt;var I=null;function ot(e){e.querySelector("pre code")&&Te(e)}function en(){let e=new URLSearchParams(window.location.search);return e.has("show_drafts")?e.get("show_drafts")==="true":sessionStorage.getItem("bb_show_drafts")==="true"}function X(e,t={}){let n=new URL(e,window.location.origin);return Object.entries(t).forEach(([o,r])=>{r!=null&&n.searchParams.set(o,String(r))}),en()&&n.searchParams.set("show_drafts","true"),n.toString()}function j(){return document.body.dataset.projectUrlSync!=="false"}function g(e,t={}){document.body.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))}function rt(e,t=!1){let n=document.createElement("div");n.className=`copy-notification${t?" error":""}`,n.textContent=e,document.body.appendChild(n),setTimeout(()=>{n.parentNode&&document.body.removeChild(n)},4e3)}async function it(e,t){let n=new URL(e,window.location.origin);n.searchParams.set("_partial","1");let o=await fetch(n.toString(),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html"},signal:t});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);return await o.text()}async function Y(e,t={}){let n=j(),{pushUrl:o=n,smoothScroll:r=!0}=t,i=document.querySelector(`.project-item[data-slug="${e}"]`);if(!i){console.error(`Project item not found for slug: ${e}`);return}if(i.classList.contains("active"))return;let s=document.getElementById(`details-${e}`);if(!s){console.error(`Details container not found for slug: ${e}`);return}I&&I.abort(),I=new AbortController,ue(),g("project:beforeLoad",{element:s,slug:e,isOpen:!0});try{let a=X(`/${e}`),l=await it(a,I.signal);if(g("project:beforeSwap",{element:s,slug:e,isOpen:!0}),s.innerHTML=l,i.classList.add("active"),o){let c=X(`/${e}`);history.pushState({slug:e,isOpen:!0},"",c)}g("project:afterSwap",{element:s,slug:e,isOpen:!0,smoothScroll:r}),ot(s)}catch(a){if(a instanceof Error&&a.name==="AbortError")return;console.error("Failed to load project:",a),g("project:error",{element:s,slug:e,isOpen:!1,error:a instanceof Error?a:new Error(String(a))}),rt("Failed to load content. Please try again.",!0)}finally{I=null}}async function K(e,t={}){let n=j(),{pushUrl:o=n}=t,r=document.querySelector(`.project-item[data-slug="${e}"]`);if(!r)return;let i=document.getElementById(`details-${e}`);if(i){if(g("project:beforeSwap",{element:i,slug:e,isOpen:!1}),i.innerHTML="",r.classList.remove("active"),o){let s=X("/");history.pushState({slug:null,isOpen:!1},"",s)}g("project:afterSwap",{element:i,slug:e,isOpen:!1})}}function ue(){document.querySelectorAll(".project-item.active").forEach(t=>{let n=t.dataset.slug;if(!n)return;let o=document.getElementById(`details-${n}`);g("project:beforeSwap",{element:o,slug:n,isOpen:!1}),o&&(o.innerHTML=""),t.classList.remove("active"),g("project:afterSwap",{element:o,slug:n,isOpen:!1})})}async function st(e){let t=parseInt(e.dataset.page??"",10);if(!(!t||e.dataset.loading==="true")){e.dataset.loading="true";try{let n=X("/",{page:t}),o=await it(n);e.insertAdjacentHTML("beforebegin",o),e.remove(),g("projects:loaded",{page:t})}catch(n){console.error("Failed to load more projects:",n),e.dataset.loading="false",rt("Failed to load more projects.",!0)}}}var k=null;function tn(){k&&k.disconnect(),k=new IntersectionObserver(e=>{e.forEach(t=>{if(t.isIntersecting){let n=t.target;n.dataset.page&&st(n)}})},{rootMargin:"100px",threshold:0}),at()}function at(){document.querySelectorAll('[id^="infinite-scroll-sentinel-"]').forEach(t=>{t.dataset.page&&k&&k.observe(t)})}function nn(e){if(!j())return;let t=e.state;if(t&&t.slug&&t.isOpen)Y(t.slug,{pushUrl:!1});else{let n=window.location.pathname;n==="/"?ue():n!=="/me"&&window.location.reload()}}function on(e){let t=e.target,n=t.closest(".project-header");if(n){let i=n.closest(".project-item");if(i){let s=i.dataset.slug;if(s){e.preventDefault(),Y(s);return}}}let o=t.closest(".thumbnail");if(o){let i=o.closest(".project-item");if(i){let s=i.dataset.slug;if(s){e.preventDefault(),Y(s);return}}}let r=t.closest(".close-project");if(r&&!(document.body.dataset.isolationMode==="true")){let s=r.closest(".project-item");if(s){let a=s.dataset.slug;if(a){e.preventDefault(),K(a);return}}}}function tt(e){let t=e.target,n=t.closest(".project-header"),o=t.closest(".thumbnail");(n||o)&&Ke()}function nt(){if(document.body.addEventListener("click",on),document.body.addEventListener("mousedown",tt),document.body.addEventListener("touchstart",tt,{passive:!0}),j()&&window.addEventListener("popstate",nn),tn(),document.body.addEventListener("projects:loaded",()=>{at()}),j()&&!history.state){let e=window.location.pathname;if(e!=="/"&&e!=="/me"){let t=e.slice(1);!!document.querySelector(`.project-item[data-slug="${t}"]`)?history.replaceState({slug:t,isOpen:!0},""):history.replaceState({slug:null,isOpen:!1},"")}else history.replaceState({slug:null,isOpen:!1},"")}ot(document.body)}function rn(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",nt):nt()}var sn={openProject:Y,closeProject:K,closeAllProjects:ue,loadMoreProjects:st,dispatchEvent:g,init:rn},lt=sn;var an=/^\s*([0-9]*\.?[0-9]+)\s*px(?:\s*!important)?\s*$/i,de=new WeakMap,ct=!1;function ln(e){return e.dataset.autoHeight!=="false"}function cn(){ct||(ct=!0,window.addEventListener("message",e=>{if(!e.source||typeof e.data!="object"||e.data?.type!=="sandbox-resize")return;let t=de.get(e.source);t&&e.data.nonce===t.nonce&&ln(t.iframe)&&(t.iframe.style.height=`${e.data.height}px`)}))}function un(){return crypto.randomUUID()}function ut(e,t){let n=new RegExp(`(?:^|;)\\s*${t}\\s*:\\s*([^;]+)`,"i"),o=e.match(n);if(!o)return null;let r=o[1]?.match(an);if(!r)return null;let i=Number.parseFloat(r[1]??"");return!Number.isFinite(i)||i<=0?null:i}function dn(e){let t=/(?:^|;)\s*margin-left\s*:\s*auto(?:\s*!important)?\s*(?:;|$)/i.test(e),n=/(?:^|;)\s*margin-right\s*:\s*auto(?:\s*!important)?\s*(?:;|$)/i.test(e);return t&&n?"center":t?"right":null}function mn(e,t){if(e.style.marginLeft="",e.style.marginRight="",t==="center"){e.style.marginLeft="auto",e.style.marginRight="auto";return}t==="right"&&(e.style.marginLeft="auto",e.style.marginRight="0")}function dt(e,t,n){t&&(e.style.cssText+=`; ${t}`);let o=n??(t?dn(t):null)??"left";if(mn(e,o),!t)return;let r=ut(t,"width"),i=ut(t,"height");!r||!i||(e.style.width=`${r}px`,e.style.height="auto",e.style.aspectRatio=`${r} / ${i}`,e.style.maxWidth="100%")}function fn(e,t){return`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
  </style>
</head>
<body>
${e}
<script>
(function() {
  var nonce = "${t}";
  function reportHeight() {
    var height = Math.max(
      document.body.scrollHeight,
      document.documentElement.scrollHeight
    );
    window.parent.postMessage({ type: 'sandbox-resize', nonce: nonce, height: height }, '*');
  }
  new ResizeObserver(reportHeight).observe(document.body);
  window.addEventListener('load', reportHeight);
  reportHeight();
})();
<\/script>
</body>
</html>`}function mt(e,t={}){cn();let n=document.createElement("iframe");n.className="html-block-sandbox";let o=["allow-scripts"];t.allowFullscreen!==!1&&n.setAttribute("allow","fullscreen"),t.allowPointerLock&&o.push("allow-pointer-lock"),n.setAttribute("sandbox",o.join(" "));let r=un();return n.srcdoc=fn(e,r),n.style.minHeight=`${t.minHeight??60}px`,n.dataset.autoHeight="true",n.addEventListener("load",()=>{n.contentWindow&&de.set(n.contentWindow,{iframe:n,nonce:r})}),n}function ft(e){e.contentWindow&&de.delete(e.contentWindow)}var S=null;function pn(e){let n=e.trim().match(/^<div\b[^>]*\bstyle\s*=\s*["'][^"']*\btext-align\s*:\s*(center|right)\b[^"']*["'][^>]*>[\s\S]*<\/div>$/i);if(n)return n[1]}function pt(e){let t=e.getAttribute("data-html-b64");if(t)try{let n=atob(t),o=mt(n,{allowFullscreen:!0}),r=e.getAttribute("style"),i=!!r&&/(^|;)\s*height\s*:/.test(r);o.dataset.autoHeight=i?"false":"true",dt(o,r,pn(n)),e.replaceWith(o)}catch(n){console.error("Failed to decode HTML block:",n)}}function hn(){return"IntersectionObserver"in window?S||(S=new IntersectionObserver((e,t)=>{e.forEach(n=>{n.isIntersecting&&(t.unobserve(n.target),pt(n.target))})},{rootMargin:"0px 0px 250px 0px",threshold:.01}),S):null}function me(e=document){let t=e.querySelectorAll(".html-block-sandbox[data-html-b64]"),n=hn();t.forEach(o=>{if(n){n.observe(o);return}pt(o)})}function gn(e=document){S&&e.querySelectorAll(".html-block-sandbox[data-html-b64]").forEach(t=>{S?.unobserve(t)}),e.querySelectorAll("iframe.html-block-sandbox").forEach(t=>{t instanceof HTMLIFrameElement&&ft(t)})}function vn(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>me()):me(),document.body.addEventListener("project:afterSwap",e=>{let n=e.detail?.element||document;me(n)}),document.body.addEventListener("project:beforeSwap",e=>{let n=e.detail?.element||document;gn(n)})}et.init();lt.init();vn();})();
//# sourceMappingURL=project-bundle.js.map
