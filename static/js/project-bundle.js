// Auto-generated by esbuild - do not edit directly

"use strict";(()=>{var ge="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",ve="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js",Le="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js";function q(e,n){let t=document.createElement("script");t.type="text/javascript",t.onload=function(){n&&n()},t.src=e,document.head.appendChild(t)}function be(e,n){let t=document.createElement("link");t.rel="stylesheet",t.href=e,t.onload=function(){n&&n()},document.head.appendChild(t)}function ye(e){be(ge,function(){q(ve,function(){q(Le,function(){e&&e()})})})}function O(e){e.querySelector("pre code")&&(typeof window.Prism>"u"?ye(function(){window.Prism?.highlightAllUnder(e)}):window.Prism.highlightAllUnder(e))}typeof window<"u"&&(window.checkAndHighlightCode=O);var L=null;function z(e){e.querySelector("pre code")&&O(e)}function Ee(){let e=new URLSearchParams(window.location.search);return e.has("show_drafts")?e.get("show_drafts")==="true":sessionStorage.getItem("bb_show_drafts")==="true"}function H(e,n={}){let t=new URL(e,window.location.origin);return Object.entries(n).forEach(([o,i])=>{i!=null&&t.searchParams.set(o,String(i))}),Ee()&&t.searchParams.set("show_drafts","true"),t.toString()}function y(){return document.body.dataset.projectUrlSync!=="false"}function f(e,n={}){document.body.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))}function V(e,n=!1){let t=document.createElement("div");t.className=`copy-notification${n?" error":""}`,t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&document.body.removeChild(t)},4e3)}async function W(e,n){let t=await fetch(e,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/html"},signal:n});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return await t.text()}async function M(e,n={}){let t=y(),{pushUrl:o=t,smoothScroll:i=!0}=n,r=document.querySelector(`.project-item[data-slug="${e}"]`);if(!r){console.error(`Project item not found for slug: ${e}`);return}if(r.classList.contains("active"))return;let s=document.getElementById(`details-${e}`);if(!s){console.error(`Details container not found for slug: ${e}`);return}L&&L.abort(),L=new AbortController,R(),f("project:beforeLoad",{element:s,slug:e,isOpen:!0});try{let c=H(`/${e}`),l=await W(c,L.signal);if(f("project:beforeSwap",{element:s,slug:e,isOpen:!0}),s.innerHTML=l,r.classList.add("active"),o){let d=H(`/${e}`);history.pushState({slug:e,isOpen:!0},"",d)}f("project:afterSwap",{element:s,slug:e,isOpen:!0,smoothScroll:i}),z(s),f("project:loaded",{element:s,slug:e,isOpen:!0})}catch(c){if(c instanceof Error&&c.name==="AbortError")return;console.error("Failed to load project:",c),f("project:error",{element:s,slug:e,isOpen:!1,error:c instanceof Error?c:new Error(String(c))}),V("Failed to load content. Please try again.",!0)}finally{L=null}}async function B(e,n={}){let t=y(),{pushUrl:o=t}=n,i=document.querySelector(`.project-item[data-slug="${e}"]`);if(!i)return;let r=document.getElementById(`details-${e}`);if(r){if(f("project:beforeSwap",{element:r,slug:e,isOpen:!1}),r.innerHTML="",i.classList.remove("active"),o){let s=H("/");history.pushState({slug:null,isOpen:!1},"",s)}f("project:afterSwap",{element:r,slug:e,isOpen:!1})}}function R(){document.querySelectorAll(".project-item.active").forEach(n=>{let t=n.dataset.slug;if(!t)return;let o=document.getElementById(`details-${t}`);f("project:beforeSwap",{element:o,slug:t,isOpen:!1}),o&&(o.innerHTML=""),n.classList.remove("active"),f("project:afterSwap",{element:o,slug:t,isOpen:!1})})}async function U(e){let n=parseInt(e.dataset.page??"",10);if(!(!n||e.dataset.loading==="true")){e.dataset.loading="true";try{let t=H("/",{page:n}),o=await W(t);e.insertAdjacentHTML("beforebegin",o),e.remove(),f("projects:loaded",{page:n})}catch(t){console.error("Failed to load more projects:",t),e.dataset.loading="false",V("Failed to load more projects.",!0)}}}var b=null;function we(){b&&b.disconnect(),b=new IntersectionObserver(e=>{e.forEach(n=>{if(n.isIntersecting){let t=n.target;t.dataset.page&&U(t)}})},{rootMargin:"100px",threshold:0}),K()}function K(){document.querySelectorAll('[id^="infinite-scroll-sentinel-"]').forEach(n=>{n.dataset.page&&b&&b.observe(n)})}function Se(e){if(!y())return;let n=e.state;if(n&&n.slug&&n.isOpen)M(n.slug,{pushUrl:!1});else{let t=window.location.pathname;t==="/"?R():t!=="/me"&&window.location.reload()}}function Te(e){let n=e.target,t=n.closest(".project-header");if(t){let r=t.closest(".project-item");if(r){let s=r.dataset.slug;if(s){e.preventDefault(),M(s);return}}}let o=n.closest(".thumbnail");if(o){let r=o.closest(".project-item");if(r){let s=r.dataset.slug;if(s){e.preventDefault(),M(s);return}}}let i=n.closest(".close-project");if(i&&!(document.body.dataset.isolationMode==="true")){let s=i.closest(".project-item");if(s){let c=s.dataset.slug;if(c){e.preventDefault(),B(c);return}}}}function _(){if(document.body.addEventListener("click",Te),y()&&window.addEventListener("popstate",Se),we(),document.body.addEventListener("projects:loaded",()=>{K()}),y()&&!history.state){let e=window.location.pathname;if(e!=="/"&&e!=="/me"){let n=e.slice(1);!!document.querySelector(`.project-item[data-slug="${n}"]`)?history.replaceState({slug:n,isOpen:!0},""):history.replaceState({slug:null,isOpen:!1},"")}else history.replaceState({slug:null,isOpen:!1},"")}z(document.body)}function He(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",_):_()}var Y={openProject:M,closeProject:B,closeAllProjects:R,loadMoreProjects:U,dispatchEvent:f,init:He};typeof window<"u"&&(window.ProjectLoader=Y);var J=Y;var E="data-scroll-lock-count",C="data-scroll-lock-y";function G(){let e=document.body,n=Number(e.getAttribute(E)||"0");if(n===0){let t=window.scrollY||window.pageYOffset||0;e.setAttribute(C,String(t)),e.classList.add("modal-open"),e.style.position="fixed",e.style.top=`-${t}px`,e.style.left="0",e.style.right="0",e.style.width="100%",e.style.overflow="hidden"}e.setAttribute(E,String(n+1))}function X(){let e=document.body,n=Number(e.getAttribute(E)||"0");if(n<=0){e.classList.remove("modal-open");return}if(n>1){e.setAttribute(E,String(n-1));return}let t=Number(e.getAttribute(C)||"0");e.removeAttribute(E),e.removeAttribute(C),e.classList.remove("modal-open"),e.style.position="",e.style.top="",e.style.left="",e.style.right="",e.style.width="",e.style.overflow="",window.scrollTo(0,t)}function P(e){e&&(e.style.backgroundPosition="0 0")}function ne(e){let i=e.getBoundingClientRect().top+window.pageYOffset-40;window.scrollTo({top:i,behavior:"smooth"})}function w(e,n=!1){let t=document.createElement("div");t.className=`copy-notification${n?" error":""}`,t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&document.body.removeChild(t)},4e3)}function oe(e){e.dataset.closing!=="true"&&(e.dataset.closing="true",X(),e.classList.remove("visible"),e.addEventListener("transitionend",()=>e.remove(),{once:!0}))}function Me(){let e=document.querySelector(".image-lightbox");return e?(oe(e),!0):!1}function F(e,n="URL copied to clipboard!"){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(()=>{w(n)}).catch(t=>{console.error("Failed to copy using Clipboard API: ",t),w("Failed to copy the URL.",!0)}):(console.warn("Clipboard API not supported in this browser."),w("Copy to clipboard not supported in this browser.",!0))}function ie(e=document){let n=e.querySelectorAll("a[href]"),t=window.location.host;n.forEach(o=>{let i=o.getAttribute("href");if(i&&!(i.startsWith("#")||i.startsWith("/")||i.startsWith("../")||i.startsWith("mailto:")||i.startsWith("tel:")))try{new URL(i,window.location.origin).host!==t&&(o.setAttribute("target","_blank"),o.setAttribute("rel","noopener noreferrer"))}catch{}})}function je(e,n){e.forEach(t=>{if(t.isIntersecting){let o=t.target;o.classList.add("fade-in"),n.unobserve(o)}})}var Pe=new IntersectionObserver(je,{root:null,rootMargin:"0px",threshold:.1});function re(e){e.forEach(n=>{!n.classList.contains("fade-in")&&!n.classList.contains("no-fade")&&Pe.observe(n)})}function xe(){let e=document.querySelectorAll(".project-item");re(e)}function Ie(e,n){e.forEach(t=>{if(t.isIntersecting){let o=t.target,i=o.getAttribute("data-bg");if(i){let r=new Image;r.onload=()=>{o.style.backgroundImage=`url('${i}')`,o.removeAttribute("data-bg"),requestAnimationFrame(()=>{o.classList.remove("lazy-thumbnail")})},r.src=i}n.unobserve(o)}})}var Ae=new IntersectionObserver(Ie,{rootMargin:"0px 0px 50px 0px",threshold:.1});function x(e=document){e.querySelectorAll(".lazy-thumbnail").forEach(t=>{t.getAttribute("data-bg")&&Ae.observe(t)})}var Oe=document.body.dataset.hlsJsSrc||"https://cdn.jsdelivr.net/npm/hls.js@1.5.12",j=null,Re=768,Ce=12,De=24,ke=180;function se(e){return e.closest(".video-container")}function le(e){let n=se(e);if(!n)return;let t=e.videoWidth,o=e.videoHeight;if(!t||!o)return;let i=t/o,r=window.innerWidth<=Re?Ce:De,s=n.getBoundingClientRect(),c=Math.max(s.top,r),l=window.innerHeight-c-r,d=Math.max(ke,Math.floor(l));n.style.setProperty("--video-aspect-ratio",i.toString()),n.style.setProperty("--video-max-height",`${d}px`),n.classList.add("video-dimensions-ready")}function Fe(e){e.videoLayoutCleanup&&e.videoLayoutCleanup();let n=()=>le(e),t=null,o=()=>{t===null&&(t=window.requestAnimationFrame(()=>{t=null,n()}))};e.addEventListener("loadedmetadata",n),e.addEventListener("resize",n),window.addEventListener("resize",n),window.addEventListener("scroll",o,{passive:!0}),n(),e.videoLayoutCleanup=()=>{e.removeEventListener("loadedmetadata",n),e.removeEventListener("resize",n),window.removeEventListener("resize",n),window.removeEventListener("scroll",o),t!==null&&(window.cancelAnimationFrame(t),t=null);let i=se(e);i&&(i.classList.remove("video-dimensions-ready"),i.style.removeProperty("--video-aspect-ratio"),i.style.removeProperty("--video-max-height"))}}function $e(){return window.Hls?Promise.resolve():j||(j=new Promise((e,n)=>{let t=document.createElement("script");t.src=Oe,t.async=!0,t.onload=()=>e(),t.onerror=()=>n(new Error("Failed to load HLS.js")),document.head.appendChild(t)}),j)}function S(e,n=!1){return console.log("[HLS] setupHLSPlayer called",{autoplay:n}),new Promise((t,o)=>{let i=e.dataset.hlsUrl;if(console.log("[HLS] Stream URL:",i),!i){console.error("No HLS URL provided for video element"),o("No HLS URL provided");return}e.classList.add("hls-video"),Fe(e);let r=()=>{le(e),n&&!document.body.classList.contains("editing")&&e.play().catch(l=>{l.name!=="AbortError"&&console.error("Autoplay failed:",l)}),t()},s=e.canPlayType("application/vnd.apple.mpegurl");console.log("[HLS] Native HLS support:",s?"yes":"no"),console.log("[HLS] HLS.js loaded:",!!window.Hls),console.log("[HLS] HLS.js supported:",window.Hls?Hls.isSupported():"n/a");let c=()=>{if(!window.Hls||!Hls.isSupported()){if(s){e.src=i,e.addEventListener("loadedmetadata",r,{once:!0});return}console.error("HLS is not supported in this browser"),o("HLS is not supported");return}e.hlsInstance&&(console.warn("HLS instance already exists for this video element. Destroying existing instance."),e.hlsInstance.destroy());let l=new Hls({abrEwmaDefaultEstimate:5e6,capLevelToPlayerSize:!0});e.hlsInstance=l,l.loadSource(i),l.attachMedia(e),l.on(Hls.Events.MEDIA_ATTACHED,()=>{l.on(Hls.Events.MANIFEST_PARSED,()=>{console.log("[HLS] Available quality levels:"),l.levels.forEach((d,u)=>{console.log(`  [${u}] ${d.height}p @ ${(d.bitrate/1e6).toFixed(1)} Mbps`)}),console.log(`[HLS] Starting level: ${l.startLevel} (auto: ${l.autoLevelEnabled})`),console.log(`[HLS] Current level: ${l.currentLevel}, Next level: ${l.nextLevel}`),r()})}),l.on(Hls.Events.LEVEL_SWITCHED,(d,u)=>{let m=u,A=l.levels[m.level];A&&console.log(`[HLS] Switched to level ${m.level}: ${A.height}p @ ${(A.bitrate/1e6).toFixed(1)} Mbps`)}),l.on(Hls.Events.ERROR,(d,u)=>{let m=u;if(m.fatal)switch(m.type){case Hls.ErrorTypes.NETWORK_ERROR:console.error("Fatal network error encountered, trying to recover"),l.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.error("Fatal media error encountered, trying to recover"),l.recoverMediaError();break;default:console.error("Fatal error encountered, destroying HLS instance:",u),l.destroy(),e.hlsInstance=null,o(u);break}else m.details==="bufferAppendError"?(console.warn("HLS.js bufferAppendError encountered and ignored:",u),l.recoverMediaError()):console.warn("HLS.js non-fatal error:",u)})};if(window.Hls&&Hls.isSupported()){console.log("[HLS] Using HLS.js (already loaded)"),c();return}console.log("[HLS] Loading HLS.js script..."),$e().then(()=>{Hls.isSupported()?(console.log("[HLS] HLS.js loaded and supported, using HLS.js"),c()):s?(console.log("[HLS] HLS.js not supported, falling back to native"),e.src=i,e.addEventListener("loadedmetadata",r,{once:!0})):(console.error("HLS is not supported in this browser"),o("HLS is not supported"))}).catch(l=>{if(s){console.log("[HLS] HLS.js failed to load, falling back to native"),e.src=i,e.addEventListener("loadedmetadata",r,{once:!0});return}console.error("Failed to load HLS.js:",l),o(l)})})}function p(e){if(e.videoLayoutCleanup&&(e.videoLayoutCleanup(),e.videoLayoutCleanup=null),e.hlsInstance&&(e.hlsInstance.destroy(),e.hlsInstance=null),e.src&&e.src.startsWith("blob:")){let n=e.src;URL.revokeObjectURL(n),e.src=""}}async function T(e,n=!0){try{let t=e.querySelector("video.lazy-video"),o=e.querySelector(".thumbnail");if(e.classList.contains("active")){t&&await S(t,!0);let i=e.querySelector(".project-header");i&&n&&ne(i)}else t&&(t.pause(),p(t)),o&&P(o);typeof h=="function"&&h()}catch(t){console.error("Error in handleProjectContent:",t)}}function ce(){document.querySelectorAll(".project-item.active").forEach(n=>{n.classList.remove("active");let t=n.querySelector("video.lazy-video");t&&(t.pause(),p(t));let o=n.querySelector(".project-details");o&&(o.innerHTML="");let i=n.querySelector(".thumbnail");i&&P(i)})}var g=0;function h(){let e=document.querySelectorAll(".thumbnail");e.length&&e.forEach(n=>{let t=parseInt(n.dataset.frames??"0",10),o=parseInt(n.dataset.frameWidth??"0",10),i=parseInt(n.dataset.frameHeight??"0",10),r=parseInt(n.dataset.columns??"1",10),s=Math.ceil(t/r),c=o*r,l=i*s;n.style.backgroundSize=`${c}px ${l}px`;let d=Math.floor(g)%t;d<0&&(d+=t);let u=d%r*o,m=Math.floor(d/r)*i;n.style.backgroundPosition=`-${u}px -${m}px`})}var Q=window.pageYOffset||document.documentElement.scrollTop,Z=Date.now(),a=0,D=Date.now(),v=null;function ae(){v!==null||document.hidden||(D=Date.now(),v=requestAnimationFrame(de))}function k(){v!==null&&(cancelAnimationFrame(v),v=null)}function Ne(){let e=window.pageYOffset||document.documentElement.scrollTop,n=Date.now(),t=(n-Z)/1e3;t>0&&(a=(e-Q)/t/3,a=Math.max(-30,Math.min(30,a))),Q=e,Z=n,Math.abs(a)>.01&&ae()}function de(){if(document.hidden){k();return}let e=Date.now(),n=(e-D)/1e3;D=e;let t=15,o=Math.abs(a)*.1,i=t+o;a>0?a=Math.max(0,a-i*n):a<0&&(a=Math.min(0,a+i*n)),g+=a*n,g>1e6&&(g-=1e6),g<-1e6&&(g+=1e6),h(),Math.abs(a)>.01?v=requestAnimationFrame(de):(a=0,k())}function qe(){window.location.pathname==="/"||document.querySelectorAll(".project-item").forEach(t=>{t.classList.add("no-fade")}),x(),h(),window.addEventListener("scroll",Ne)}function ue(e=document){let n=e.querySelectorAll("video.lazy-video");if("IntersectionObserver"in window){let t=new IntersectionObserver((o,i)=>{o.forEach(r=>{if(r.isIntersecting){let s=r.target;S(s,!1).catch(c=>{console.error("Failed to initialize HLS player for video:",c)}),i.unobserve(s),s.dataset.loaded="true"}})},{rootMargin:"0px 0px 200px 0px",threshold:.25});n.forEach(o=>{o.dataset.loaded||t.observe(o)})}else n.forEach(t=>{S(t,!1).catch(o=>{console.error("Failed to initialize HLS player for video:",o)}),t.dataset.loaded="true"})}function _e(){ue(),x(),ze()}function ze(){let e=document.querySelector(".project-item.active");e&&(document.readyState==="complete"?T(e,!1):window.addEventListener("load",()=>{T(e,!1)}))}function I(){document.querySelectorAll("video.hls-video").forEach(t=>{p(t)}),document.querySelectorAll("video").forEach(t=>{t.hlsInstance&&p(t)})}function Ve(){I()}function We(e){let{element:n,isOpen:t,smoothScroll:o=!0}=e.detail;if(!n)return;let i=n.closest(".project-item");if(i){if(t){let r=n.querySelector("video.lazy-video");r&&S(r,!0).catch(c=>{console.error("Failed to initialize HLS player:",c)});let s=i.querySelector(".project-header");s&&o&&ne(s)}else{let r=i.querySelector("video.lazy-video");r&&(r.pause(),p(r));let s=i.querySelector(".thumbnail");s&&P(s)}x(n),ue(n),h(),ie(n)}}function Be(){let e=document.querySelectorAll(".project-item:not(.fade-in):not(.no-fade)");re(e),x(),h()}function Ue(e){let{element:n}=e.detail,t=n?.closest(".project-item");t&&T(t)}function ee(e){let n=e.closest(".project-item");if(!n)return;if(document.body.dataset.isolationMode==="true")n.classList.add("fade-out"),n.addEventListener("animationend",function o(){n.removeEventListener("animationend",o);let i=new URL("/",window.location.origin);(new URLSearchParams(window.location.search).get("show_drafts")==="true"||sessionStorage.getItem("bb_show_drafts")==="true")&&i.searchParams.set("show_drafts","true"),window.location.href=i.toString()});else{n.classList.remove("active");let o=n.querySelector("video.lazy-video");o&&(o.pause(),p(o));let i=n.querySelector(".thumbnail");i&&P(i);let r=n.querySelector(".project-details");r&&(r.innerHTML="")}}function Ke(){document.body.addEventListener("project:afterSwap",We),document.body.addEventListener("project:beforeSwap",Ve),document.body.addEventListener("project:loaded",Ue),document.body.addEventListener("projects:loaded",Be),document.body.addEventListener("project:error",()=>{w("Failed to load content. Please try again.",!0)}),document.body.addEventListener("click",e=>{let t=e.target.closest(".copy-text-link");if(t){e.preventDefault();let o=t.getAttribute("data-copy-text"),i=t.getAttribute("data-notification-message")||"URL copied to clipboard!";o?F(o,i):(console.warn("No copy text provided for copying."),w("No content available to copy.",!0))}}),document.body.addEventListener("click",function(e){let n=e.target.closest(".close-project");n&&document.body.dataset.isolationMode==="true"&&(e.preventDefault(),ee(n))}),document.body.addEventListener("click",function(e){let n=e.target.closest(".project-content img");if(!n)return;let t=document.createElement("div");t.className="image-lightbox";let o=document.createElement("button");o.className="image-lightbox-close",o.innerHTML="&times;";let i=document.createElement("img");i.src=n.src,i.alt=n.alt||"",t.appendChild(o),t.appendChild(i),document.body.appendChild(t),G(),requestAnimationFrame(()=>t.classList.add("visible"));let r=()=>oe(t);o.addEventListener("click",r),t.addEventListener("click",function(s){s.target===t&&r()})}),document.addEventListener("keydown",function(e){if(e.key==="Escape"){if(document.body.classList.contains("editing")||Me())return;let n=document.querySelector(".project-item.active");if(n){let t=n.querySelector(".close-project");if(t)if(document.body.dataset.isolationMode==="true")ee(t);else{let i=n.dataset.slug;i&&window.ProjectLoader&&window.ProjectLoader.closeProject(i)}}}}),document.addEventListener("visibilitychange",()=>{document.hidden?k():Math.abs(a)>.01&&ae()})}function te(){if(window.location.hash){let e=document.getElementById(window.location.hash.slice(1));e&&e.scrollIntoView({behavior:"smooth"})}}function Ye(){qe(),_e(),xe(),ie(),window.addEventListener("beforeunload",I)}function Je(){Ye(),Ke(),window.addEventListener("load",te),window.addEventListener("hashchange",te)}typeof window<"u"&&(window.copyToClipboard=F,window.handleProjectContent=T,window.closeAllOpenProjects=ce,window.cleanupActiveHLSPlayers=I);var Ge={init:Je,handleProjectContent:T,closeAllOpenProjects:ce,cleanupActiveHLSPlayers:I,copyToClipboard:F,updateThumbnails:h,setupHLSPlayer:S,destroyHLSPlayer:p},fe=Ge;var $=new WeakMap,me=!1;function Xe(){me||(me=!0,window.addEventListener("message",e=>{if(!e.source||typeof e.data!="object"||e.data?.type!=="sandbox-resize")return;let n=$.get(e.source);n&&e.data.nonce===n.nonce&&(n.iframe.style.height=`${e.data.height}px`)}))}function Qe(){return crypto.randomUUID()}function Ze(e,n){return`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
  </style>
</head>
<body>
${e}
<script>
(function() {
  var nonce = "${n}";
  function reportHeight() {
    var height = Math.max(
      document.body.scrollHeight,
      document.documentElement.scrollHeight
    );
    window.parent.postMessage({ type: 'sandbox-resize', nonce: nonce, height: height }, '*');
  }
  new ResizeObserver(reportHeight).observe(document.body);
  window.addEventListener('load', reportHeight);
  reportHeight();
})();
<\/script>
</body>
</html>`}function pe(e,n={}){Xe();let t=document.createElement("iframe");t.className="html-block-sandbox";let o=["allow-scripts"];n.allowFullscreen!==!1&&(o.push("allow-fullscreen"),t.setAttribute("allow","fullscreen")),n.allowPointerLock&&o.push("allow-pointer-lock"),t.setAttribute("sandbox",o.join(" "));let i=Qe();return t.srcdoc=Ze(e,i),t.style.minHeight=`${n.minHeight??60}px`,t.addEventListener("load",()=>{t.contentWindow&&$.set(t.contentWindow,{iframe:t,nonce:i})}),t}function he(e){e.contentWindow&&$.delete(e.contentWindow)}function N(e=document){e.querySelectorAll(".html-block-sandbox[data-html-b64]").forEach(n=>{let t=n.getAttribute("data-html-b64");if(t)try{let o=atob(t),i=pe(o,{allowFullscreen:!0});n.replaceWith(i)}catch(o){console.error("Failed to decode HTML block:",o)}})}function et(e=document){e.querySelectorAll("iframe.html-block-sandbox").forEach(n=>{n instanceof HTMLIFrameElement&&he(n)})}function tt(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>N()):N(),document.body.addEventListener("project:afterSwap",e=>{let t=e.detail?.element||document;N(t)}),document.body.addEventListener("project:beforeSwap",e=>{let t=e.detail?.element||document;et(t)})}fe.init();J.init();tt();})();
//# sourceMappingURL=project-bundle.js.map
